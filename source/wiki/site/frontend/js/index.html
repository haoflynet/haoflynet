<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>js - 我的Wiki</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "js";
    var mkdocs_page_input_path = "frontend/js.md";
    var mkdocs_page_url = "/frontend/js/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> 我的Wiki</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>code</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../code/安全测试/">安全测试</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../code/编码经验/">编码经验</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../code/代码审查清单/">代码审查清单</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../code/正则表达式/">正则表达式</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../code/packages/">packages</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>python</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/Django/">Django</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/Flask/">Flask</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/kivy/">kivy</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/pybrain/">pybrain</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/Django/">Django</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/PyQT/">PyQT</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/pytest/">pytest</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/python/">python</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/Scrapy-PySpider/">Scrapy-PySpider</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/Splinter/">Splinter</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/string/">string</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/Tornado/">Tornado</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>frontend</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../bootstrap/">bootstrap</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">js</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#javascript-ajax-jquery">JavaScript &amp; Ajax &amp; jQuery</a></li>
                
                    <li><a class="toctree-l4" href="#_1">基本语法</a></li>
                
                    <li><a class="toctree-l4" href="#dom">DOM操作</a></li>
                
                    <li><a class="toctree-l4" href="#troubleshooting">TroubleShooting：</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../css/">css</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../frontend/">frontend</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../gulp/">gulp</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../html/">html</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../nodejs/">nodejs</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Database</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Database/MySQL and Mriadb/">MySQL and Mriadb</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Database/atlas/">atlas</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Database/MHA/">MHA</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Database/redis/">redis</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Database/sqlite/">sqlite</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>PHP</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../PHP/php/">PHP</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../PHP/Laravel/">Laravel</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../PHP/PHP编码规范/">PHP编码规范</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Other Tools</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/Docker/">Docker</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/Git/">Git</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/Chrome/">Chrome</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/curl/">curl</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/Atom/">Atom</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/SVN/">SVN</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/Openstack/">Openstack</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/shadowsocks/">shadowsocks</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/fpm/">fpm</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/hexo/">hexo</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/phpmyadmin/">phpmyadmin</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/Sublime Text/">Sublime Text</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/terminal/">terminal</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/vim/">vim</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/wireshark/">wireshark</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/wordpress/">wordpress</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Other Tools/workbench/">workbench</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>server</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../server/apache/">apache</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../server/HAProxy/">HAProxy</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../server/lamp/">lamp</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../server/nginx/">nginx</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../server/puppet/">puppet</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../server/saltstack/">saltstack</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../server/wamp/">wamp</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../server/zabbix/">zabbix</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>system</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../system/装机必备/">装机必备</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../system/Android/">Android</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../system/Linux/">Linux</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../system/MAC OSX/">MAC OSX</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../system/Raspberry Pi/">Raspberry Pi</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../system/Windows/">Windows</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>C and C++</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../C and C++/C/">C</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../C and C++/C++/">C++</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Java</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Java/java/">Tips</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">我的Wiki</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>frontend &raquo;</li>
        
      
    
    <li>js</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="javascript-ajax-jquery">JavaScript &amp; Ajax &amp; jQuery</h1>
<h2 id="_1">基本语法</h2>
<h3 id="_2">数组</h3>
<pre><code>$.each($array, function(k, v){});   # 遍历数组
</code></pre>
<h3 id="_3">字符串</h3>
<pre><code>JSON.parse(text)    # 将字符串转换为JSON
str.replace(reg, function(s, value){})  # 替换字符串，reg可以是正则表达式
str.indexOf(substring)  # 查找子字符串出现的位置，-1表示没找到
str.split('#')  # 字符串分割，返回分割后的列表
</code></pre>
<h2 id="dom">DOM操作</h2>
<h3 id="_4">元素操作</h3>
<pre><code># 元素选择
$('p')  # 选取标签&lt;p&gt;的所有元素
$('p#intro')  # id为intro的所有p元素
$('p.intro')  # class为intro的所有p元素
$('p:first')  # 选取第一个&lt;p&gt;元素
$('p a:first')# 选取p元素下的第一个a元素
$('p[name=abc]')#
$('*')        # 所有元素
$(this)       # 当前元素
$(this).next()  # 获取下一个同级元素
$(this).nextAll('cl') # 获取指定元素的所有指定的同级元素

# 添加元素
append()    # 在被选元素的结尾插入内容
prepend()   # 在被选元素的开头插入内容
after() # 在被选元素之后插入内容
before()    # 在被选元素之前插入内容
# 属性更改
addClass('')        # 给元素添加类
removeClass('') # 给元素移除某个类
$('p').css('color', 'red')      # 修改CSS属性
</code></pre>
<h3 id="_5">元素事件</h3>
<pre><code>change()    # 当元素发生改变时触发，常用于input、select
focus() # 元素获得焦点时触发
blur()      # 元素失去焦点时触发
</code></pre>
<h3 id="_6">页面属性</h3>
<pre><code>window.lcoation.href = 'url'    # 跳转到某个url
</code></pre>
<h3 id="_7">特殊函数</h3>
<pre><code>t = setInterval("show()",3000)  # 每隔3秒执行该函数
clearInterval(t)                        # 清楚计时器
</code></pre>
<h4 id="ajax">ajax()</h4>
<p>这是最基本的方法，可完成下面所有方法的功能，其调用格式为： <code>$.ajax(\{参数列表\}) &amp;nbsp; &amp;nbsp;或 &amp;nbsp;
&amp;nbsp;jQuery.ajax(\{参数列表\})</code>
其中的参数列表是指该请求的各个配置数据，用大括号保卫，其中的参数url是必须的，其它的配置在特定的环境下需要特别注明。例如：</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript"&gt;
    $(function()\{
      $('#btn').bind('click', function()\{
        $.ajax(\{
          url: "a.txt",    // 获取a.txt文件的内容
          dataType: "text",
          error: function()\{
            $('.content').text("出错啦");
          \},
          success: function(data)\{
            $('.content').text(data);
          \}
        \});
      \});
    \});
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p class="content"&gt;以前的内容&lt;/p&gt;
  &lt;button id="btn"&gt;测试&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h4 id="ajaxsetup">ajaxSetup()</h4>
<p>设置全局的Ajax默认选项，这样就不用每一个请求都向上面那样写一大串的参数列表了，其调用格式为： <code>$.ajaxSetup([options])
&amp;nbsp; 或 &amp;nbsp; jQuery.ajaxSetup([options])</code></p>
<h4 id="load">load()</h4>
<p>通过Ajax请求加载服务器中的数据，可直接把获取到的数据放置到指定的元素中去，其调用格式为： <code>load(url, [data], [callback]</code>
其中，url为服务器的地址，后面两个为可选参数，data为请求时所发送的数据，callback为回调函数。例如：</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript"&gt;
    $(function()\{
      $('#btn').bind('click', function()\{
        $(".content").load('a.txt');
      \});
    \});
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p class="content"&gt;以前的内容&lt;/p&gt;
  &lt;button id="btn"&gt;测试&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h4 id="getjson">getJSON()</h4>
<p>通过Ajax获取服务器中的数组，并对获取的数据进行解析，显示在页面中，其调用格式为： <code>$.getJSON(url, [data], [callback])</code></p>
<h4 id="getscript">getScript()</h4>
<p>通过Ajax获取并执行服务器中的JavaScript文件，其调用格式为： <code>$.getScript(url, [callback])</code></p>
<h4 id="get">get()</h4>
<p>使用Ajax的GET请求方式向服务器请求数据，请求所获得的数据保存在回调函数的参数中，其调用格式为： <code>$.get(url, [callback])</code></p>
<p>回调函数要是用获取到的数据就定义为function(data){}，其中data即使获取到的数据。</p>
<h4 id="post">post()</h4>
<p>使用Ajax的POST请求方式向服务器发送数据，其调用格式为： <code>$.post(url,[data],[callback])</code></p>
<h4 id="serialize">serialize()</h4>
<p>序列化表单元素值，将表单中有name属性的元素值进行序列化，生成标准URL编码文本字符串，直接可用于ajax请求，其调用格式为
<code>$(selector).serialize()</code></p>
<h4 id="ajaxstartajaxstop">ajaxStart()和ajaxStop()</h4>
<p>分别用于在该Ajax请求出发前和出发后所执行的函数，其调用格式为： <code>$(selector).ajaxStart(function()\{\}) &amp;nbsp;
和 &amp;nbsp;$(selector).ajaxStop(function()\{\}</code></p>
<h3 id="jquery-ajax">jQuery Ajax参数</h3>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>String</td>
<td>发送到服务器的数据，将自动转换成请求字符串格式。 GET请求中附加在URL后。</td>
</tr>
<tr>
<td>dataType</td>
<td>String</td>
<td>预期服务器返回的数据类型，如下几种：</td>
</tr>
<tr>
<td>"xml""html""script""json""jsonp""text"</td>
<td></td>
<td></td>
</tr>
<tr>
<td>error</td>
<td>Function</td>
<td>请求失败时调用此函数</td>
</tr>
<tr>
<td>success</td>
<td>Function</td>
<td>请求成功时调用此函数</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>指定请求方式，默认为“GET”，可设置为“POST”或其它 例如“PUT”、“DELETE”等</td>
</tr>
<tr>
<td>url</td>
<td>String</td>
<td>发送请求的地址，默认为当前页的地址</td>
</tr>
<tr>
<td>如需传递数据只需要如下：</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<pre><code>$('button#publish').bind('click', function()\{
    var $data = \{\};
    $data.id = '----------------------';
    $.ajax(\{
    url: "\{\{ url('publish') \}\}",
    type: "POST",
    data: $data,     // 可以使用Input::get('id')来获取该数据
    dataType: "html",
    error: function()\{
        $('.message').html("出错啦");
        \},
    success: function(data)\{
        $('.message').html(data + $('.message').html())
    \}
    \});
\});
</code></pre>
<h2 id="troubleshooting">TroubleShooting：</h2>
<ul>
<li>本地调试Ajax如果不行的话，就使用火狐浏览器，谷歌调试本地ajax貌似不支持</li>
<li>在Laravel中如果出现TokenMismatchException，有可能是Laravel的CSRF机制造成的，解决办法参见<a href="http://www.golaravel.com/laravel/docs/5.0/routing/">http://www.golaravel.com/laravel/docs/5.0/routing/</a>，即 首先在meta中添加<pre><code>&lt;meta name="csrf-token" content="\{\{ csrf_token() \}\}" /&gt;
</code></pre>
</li>
</ul>
<p>然后设置ajaxSetup：</p>
<pre><code>    &lt;script type="text/javascript"&gt;
    $(function()\{
    $.ajaxSetup(\{
        headers: \{
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        \}
    \});
        $('#publish').bind('click', function()\{        // ajax事件
            $.ajax(\{
                。。。
           \});
&lt;/script&gt;
</code></pre>
<ul>
<li>Laravel 5 要使用Input获取输入的信息，必须先<code>use Input</code>，看来Laravel 5 对命名空间的管理更加严格了</li>
<li>Ajax请求总是执行error部分代码，原因可能是返回数据的格式不对，一定要返回dataType所规定的数据格式</li>
<li>上传文件，需要特殊的几个参数和变量<pre><code>$('input#uploadh').bind('change', function()\{

var f = this.files;
var formdata = new FormData();
formdata.append('image', f[0]);

$.ajax(\{
url: "\{\{ url('uploadimg') \}\}",
type: "POST",
data: formdata,
dataType: "json",
processData: false,
contentType: false,
success: function(data)\{
alert('成功');
 \}
</code></pre>
<p>});</p>
</li>
</ul>
<p>});</p>
<p>如果是通过一个button而不是input提交的话，那么可以这样使用： $('button#uploadFile').on('click',
function(){ var f = $('input#uploadFile')[0].files; var formadata = new
FormData(); formdata.append('image', f[0]);
需要注意的是，只能一个文件一个文件地append，后台才能通过request.FILES看到</p>
<ul>
<li>
<p>如果要在Ajax中读取其它Json文件，可以使用$.getJson方法，但是由于这个方法使用的是同步ajax的方式，而且即使是在其回调函数中也无法将返回值赋值到外部变量去，所以可以直接用ajax请求来取代它：</p>
<pre><code>var data = [];
</code></pre>
<p>$.ajax({
  url: 'port.json',
  async: false,
  dataType: 'json',
  success: function (json) {
    data = json.一个结点名称;
  }
});
alert(data);</p>
</li>
<li>
<p>获取当前元素的父元素，使用target，但有时候也可以不用target...我也是醉了 获取同级的元素：prev()和next()</p>
<pre><code>$('button#post').bind('click', function(ele)\{
$.ajax(\{
    url: port,
    type: "POST",
    dataType: "json",
    error: function(error)\{
        alert('出错啦');
    \},
    success: function(data)\{
        alert($(ele.target).parent().parent().attr('id'));
    \}
\});
</code></pre>
<p>});</p>
</li>
<li>
<p>Ajax请求无论是GET还是POST都突然变成了OPTIONS请求，常见于把本地代码提交到服务器时，发生了跨域请求错误，url里面写的是本地的端口地址，这时候只需要修改本地的端口地址修改为相对于服务器的本地地址即可。</p>
</li>
<li>
<p>Ajax error的时候获取返回的信息</p>
<pre><code>error: function(error)\{
var msg = $.parseJSON(error.responseText);  // 如果返回的是JSON数据需要解析一下
alert(msg.status);
</code></pre>
<p>},</p>
</li>
<li>
<p>实现跳转功能：</p>
<pre><code>$('input#comment').on('click', function(ele)\{
var item_id = $(ele.target).parent().attr('id');
window.location.href='/post/' + item_id;
</code></pre>
<p>});</p>
</li>
<li>
<p>在ajax的url里面，默认是相对于当前地址的url，例如</p>
<pre><code>当前地址是http://localhost/a，那么url: 'publish'表示http://localhost/publish
</code></pre>
<p>当前地址是http://localhost/a/b，那么url: 'publish'表示http://localhost/hehe/publish
只有写为url: '/publish'才表示相对于根域名，即http://localhost/publish</p>
</li>
<li>
<p>获取当前页面的URL信息：</p>
<pre><code>window.location.pathname   # 获取当前url的后缀(域名后面的部分)
</code></pre>
<p>window.location.href       # 获取整个URL
window.location.port       # 获取端口号
window.location.protocol   # 获取URL的协议
window.location.host       # 域名加端口号
window.location.search     # 问号后面的部分</p>
</li>
<li>
<p>判断是否存在某个节点</p>
<pre><code>if( $(this).length &gt;= 1)\{
 alert('存在');
</code></pre>
<p>} else {
    alert('不存在');
}</p>
</li>
<li>
<p>给生成的元素动态绑定事件：SegmentFault说直接用.on方法可以实现1.7之前.live的动态绑定功能，但是我就是不行，这里使用.on的另外一种方法，绑定到document上去就行了，原理就是将事件委托给父元素，然后由父元素绑定给子元素：</p>
<pre><code>$(document).on('click', 'button', function()\{
alert('dg');
</code></pre>
<p>});</p>
</li>
<li>
<p>绑定回车事件：</p>
<pre><code>$(document).on('keypress', 'input', function(event)\{
if(event.keyCode == '13')\{
    alert('success');
</code></pre>
<p>});</p>
</li>
<li>
<p>查找元素： find可以查找所有子孙元素，children只查找第一级的元素，如果要在查找到的元素上继续查找，那么要使用括号将它变成一个jquery元素，例如：</p>
<pre><code>trs = $('tbody').children('tr');
</code></pre>
<p>ths = $(trs[0]).children('th');</p>
</li>
<li>
<p>序列化表单数据，然后通过ajax直接提交：</p>
<pre><code>$("button").click(function()\{
</code></pre>
<p>$("div").text($("form").serialize());
});</p>
<p>// 同样可以通过数组的方式来传递
$("button").click(function(){
  $("div").text($("form").serializeArray());
});  </p>
</li>
<li>
<p>提交表单时，如果想增加额外的参数，可以添加动态添加一个隐藏标签：  </p>
<pre><code>var input = $("&lt;input&gt;").attr("type", "hidden").attr("name", "字段名").val("value");
</code></pre>
<p>$('#form1').append($(input));</p>
</li>
<li></li>
</ul>
<hr />
<p>title: "jQuery、JavaScript奇淫技巧"
  date: 2015-03-21 18:36:35
  categories: jquery</p>
<hr />
<pre><code>* 基本运算


      parseInt(数字)  # 将数字取整

* 选择器


      # 元素选择

  # 属性选择
  $('p[name=abc]') # name为abc的p元素，其中不等于用!=，$=表示以什么结束的元素

  # CSS选择
  $('p').css('background-color', 'red') # background-color为red的p元素

* 元素事件


      resize() # 大小调整，一般是$(window).resize(function()\{\})
  click    # 鼠标点击
  dbclick  # 鼠标双击
  mouseenter # 鼠标穿过元素
  mousesleave # 鼠标离开元素
  mousedown  # 鼠标移动到元素上方，并按下鼠标按键
  mouseup    # 在元素上松开鼠标按钮
  hover      # 模拟光标悬停事件
  focus      # 元素获得焦点
  blur       # 元素失去焦点

  # 触发事件
  $('a').trigger('click')  # 触发a标签的click事件
  $('#myModal').modal('show')  # bootstrap中modal的触发

* 元素操作


      $(selector).removeClass(class)  # 移除某个元素指定的类
  $('#image').attr('src', 'image...')  # 修改image元素的src属性
</code></pre>
<p>今天在写代码的时候居然想着用POST请求来传递大段大段的html内容，后来一想，jQuery怎么可能没有直接操作网页元素的方法呢，果然，jQuery是可以直
  接操作DOM的。</p>
<p>DOM(Document Object Model文档对象模型)，定义了访问HTML和XML文档的标准。</p>
<p>## 获取内容</p>
<p><strong>text()</strong>：设置或返回所选元素的文本内容</p>
<p><strong>html()</strong>：设置或返回所选元素的内容(包括HTML标记)</p>
<p><strong>val()</strong>：设置或返回表单字段的值</p>
<p>一些不常用的获取方法：</p>
<pre><code>  $('#anonymous').prop('checked')         // jQuery1.6+获取checkbox的值
</code></pre>
<p>## CRUD</p>
<p>### 删除</p>
<p>remove()：</p>
<p>detach()：会保留其所绑定的事件及附加的数据</p>
<p>empty()：保留本身，删除所有子节点</p>
<p>例如：</p>
<pre><code>  $("div").remove("#3");   // 删除div标签里面id为3的标签
</code></pre>
<p>###  添加</p>
<p>clone()：复制节点，如果带一个参数true，则表示会把该节点的所有绑定的事件一起复制</p>
<p>replaceAll() / replaceWith()：替换节点</p>
<p>append() / appendTo() / append(function(index,
  html){})：在所选元素的最后的前面插入，其中index表示索引，而html表示其内容</p>
<p>prepend() / prependTo() prepend(function(index, html){})：在所选元素内部的最前面插入</p>
<p>after() / insertAfter()：插入到所选节点的后面</p>
<p>before() / insertBefore()：插入到所选节点的前面</p>
<p>例如：这是一个ajax请求的success部分</p>
<pre><code>  success: function(data)\{
      var $new_item = '&lt;div class="item col-md-1"&gt;'+                                    '    &lt;div class="panel panel-default"&gt;'+
                      '        &lt;div class="panel-heading"&gt;' + data + '&lt;/div&gt;' +                   '        &lt;div class="panel-body"&gt;耶耶耶耶耶"&lt;/div&gt;'+                 '    &lt;/div&gt;'+                                     '&lt;/div&gt;';
      $('.message').prepend(function(html)\{
          return $new_item;
      \});
  \}
</code></pre>
<p>### 修改</p>
<p>直接将内容text修改即可</p>
<p>## TroubleShooting</p>
<pre><code>* &lt;select&gt;元素的选择&lt;option&gt;事件是change，而获得所选择元素使用的是val()，默认被选择：&lt;option selected="true" value="xxx"&gt;xxx&lt;/option&gt;
* &lt;input&gt;元素，输入一个字符立马出发事件的event是：


      $('#myinput').on('input', function()\{
      alert('aaaaaaaa');
  \});

* 设置checkbox的属性，设置其它属性与此类似：


      $("#checkbox_id3").attr("checked", true)

  $("#checkbox_id3").attr("checked", 'checked')
  $("#checkbox_id3").attr("checked", false)
  $"#checkbox_id3").attr("checked", '')

* 判断是否有某个class：


      $("button").click(function()\{
    alert($("p:first").hasClass("intro"));
  \});

* jquery设置元素的CSS属性


        $("p").css("color","red");

* a标签href不跳转的方法


      &lt;a href="javascript:void(0);"&gt;呵呵&lt;/a&gt;

* 避免表单回车自动提交：有时候想在表单提交前进行一些操作，但又不想在回车时自动提交表单(当只有input的时候，会强制提交)，这时候只需要在button的回车事件中添加return false即可
*
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../css/" class="btn btn-neutral float-right" title="css">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../bootstrap/" class="btn btn-neutral" title="bootstrap"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../bootstrap/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../css/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
