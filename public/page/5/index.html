<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="豪翔天下,Python开发工程师,全栈开发工程师" />





  <link rel="alternate" href="/atom.xml" title="豪翔天下" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="豪翔天下的个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="豪翔天下">
<meta property="og:url" content="https://haofly.net/page/5/index.html">
<meta property="og:site_name" content="豪翔天下">
<meta property="og:description" content="豪翔天下的个人博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="豪翔天下">
<meta name="twitter:description" content="豪翔天下的个人博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://haofly.net/page/5/"/>





  <title> 豪翔天下 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47480072-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d06802e96e214bdb413a40b263d4cc15";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">豪翔天下</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Change My World by Program</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-favorites">
          <a href="/favorites.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-flag"></i> <br />
            
            menu.favorites
          </a>
        </li>
      
        
        <li class="menu-item menu-item-wiki">
          <a href="https://wiki.haofly.net" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-key"></i> <br />
            
            menu.wiki
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/decorator装饰器/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/decorator装饰器/" itemprop="url">
                  Python装饰器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-07T07:59:39+08:00">
                2016-08-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/decorator装饰器/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="decorator装饰器/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Python装饰器"><a href="#Python装饰器" class="headerlink" title="Python装饰器"></a>Python装饰器</h1><p>装饰器就是一个函数，它接受其它函数为参数返回一个装饰过的函数，装饰器可用于静态方法、属性(@staticmethod)，在函数前后执行特定代码(比如，验证参数、给函数调用做缓存、注册回调函数、给函数打日志)</p>
<h4 id="最简单的装饰器"><a href="#最简单的装饰器" class="headerlink" title="最简单的装饰器:"></a>最简单的装饰器:</h4><pre><code>from functools import wraps
def b(func):
    @wraps(func)
    def decorate(func):
        print(&apos;b&apos;)
        return func(canshu)    # 如果要传递参数可以在这里进行传递
    return decorate

@b
def a(canshu):
    print(&apos;a&apos;)
</code></pre><p>执行<code>a()</code>的时候会分别输出<code>b</code>和<code>a</code>，需要注意的是，这里不加wraps也是可以的，但是如果不加wraps，那么函数就真的相当于一个新的函数了，通过内省方法获取函数的元信息等都会变成新的，而如果wraps则会消除这样的影响。在flask中如果对views函数进行了装饰，不加wraps会出现这样的错误:</p>
<pre><code>AssertionError: View function mapping is overwriting an existing endpoint function: decorate
</code></pre><h4 id="使用类作为装饰器"><a href="#使用类作为装饰器" class="headerlink" title="使用类作为装饰器"></a>使用类作为装饰器</h4><p>被装饰的函数会作为实例化参数，得到一个类实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginCheck</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, f)</span>:</span></div><div class="line">        self._f = f</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, *args)</span>:</span></div><div class="line">        Status = check_function()</div><div class="line">        <span class="keyword">if</span> Status <span class="keyword">is</span> <span class="number">1</span>:</div><div class="line">            <span class="keyword">return</span> self._f(*args)</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">return</span> alt_function()</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_function</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> test</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">alt_function</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'Sorry - this is the forced behaviour'</span></div><div class="line"></div><div class="line"><span class="meta">@LoginCheck</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">display_members_page</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'This is the members page'</span></div></pre></td></tr></table></figure>
<h3 id="应用场景："><a href="#应用场景：" class="headerlink" title="应用场景："></a><a href="https://www.oreilly.com/ideas/5-reasons-you-need-to-learn-to-write-python-decorators?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+oreilly%2Fradar%2Fatom+%28O%27Reilly+Radar%29" target="_blank" rel="external">应用场景</a>：</h3><ol>
<li>日志记录与分析</li>
<li>数据验证(用户合法性校验、数据合法性校验)</li>
<li>重复使用代码</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/git/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/git/" itemprop="url">
                  Git 教程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-07T07:12:39+08:00">
                2016-08-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tools/" itemprop="url" rel="index">
                    <span itemprop="name">tools</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/git/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="git/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Git指南"><a href="#Git指南" class="headerlink" title="Git指南"></a>Git指南</h1><p>这里所列举的通用配置无论是在Windows还是Linux，都要用到</p>
<h2 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h2><h3 id="安装Git软件"><a href="#安装Git软件" class="headerlink" title="安装Git软件"></a>安装Git软件</h3><p>Windows平台：<a href="http://msysgit.github.io/" target="_blank" rel="external">Git for Windows</a>(在安装的时候注意那些选项的设置)<br>Linux平台：<code>sudo apt-get install git</code></p>
<h3 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h3><p>打开终端，在windows平台就用上一步安装上的git bash</p>
<pre><code># 全局配置，这里的用户名和邮箱填写你自己的帐号，可以是github上的帐号信息
git config --global user.name &quot;haoflyent&quot;
git config --global user.email &quot;haoflynet@gmail.com&quot;

# 如果要同一台机器多个git账户，那么可以取消全局设置
git config --global --unset user.name
git config --global --unset user.email
git config user.email &quot;x@xx.com&quot;    # 在仓库里面单独设置
git config user.name &quot;xx&quot;

# 生成密钥
ssh-keygen -t rsa -C &quot;haoflynet@gmail.com&quot;
# 然后一路默认就可以，注意看其中的密钥存放位置，其中公钥文件Windows默认为/c/Users/用户名/.ssh/id_rsa.pub# Linux默认为 ~/.ssh/rsa_pub
</code></pre><h3 id="Git相关文件"><a href="#Git相关文件" class="headerlink" title="Git相关文件"></a>Git相关文件</h3><p><strong>.gitkeep</strong>: 这个文件当前所在的空目录可以加入到版本控制里面去</p>
<h2 id="Github的使用"><a href="#Github的使用" class="headerlink" title="Github的使用"></a>Github的使用</h2><p>打开公钥文件，然后复制其中的内容到Github上的setting-&gt;SSH keys-&gt;Add SSH key，如下<br><img src="http://7xnc86.com1.z0.glb.clouddn.com/configuration-of-git_0.png" alt=""><br>点击Add Key后会要求输入github密码，因为这是特别敏感的操作<br>然后进行新建仓库，无论是github还是其他托管网站都可以新建远程库，新建完成后都会提示你下一步该怎么做<br><img src="http://7xnc86.com1.z0.glb.clouddn.com/configuration-of-git_1.png" alt=""><br>按照上图给出 操作指南，有三种方法分别是</p>
<ul>
<li>在本地建立一个新库，并新建一个README.md到远程库</li>
<li>直接将本地库的代码推送到远程库，不过在本地需要将文件夹编程一个库</li>
<li>从别的库导入代码到该库<br>具体的命令在途中均有给出</li>
</ul>
<h2 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"># 日志/历史查看</div><div class="line">git log  # 查看提交的历史,--oneline按行显示，--graph查看分支的合并情况，--all显示所有分支的历史</div><div class="line">git reflog	# 查看HEAD的历史情况</div><div class="line"></div><div class="line"># 代码改动</div><div class="line">git blame filename   # 查看某文件的改动历史</div><div class="line">git diff + 分知名   # 比较当前分支和目标分支的不同</div><div class="line">git diff master</div><div class="line"></div><div class="line"># 版本回退/回滚,--hard表示将该次提交之前所有的更改都丢弃，git reset是把HEAD向历史移动，而git revert是HEAD继续向前，新的commit就和revert的内容刚好相反，所以推荐使用revert，reset的target是要会退到的版本，而revert得target是要取消的版本</div><div class="line">git reset --hard HEAD^  # 回退到上一个版本</div><div class="line">git reset --hard HEAD^^ # 回退到上上个版本</div><div class="line">git reset --hard 233333 # 指定提交ID的回退</div><div class="line">git push -f origin master	# remote端也更新</div><div class="line"></div><div class="line"># 分支操作</div><div class="line">git branch -a  # 查看当前分支</div><div class="line">git checkout origin/dev	# 检出远程分支到本地，此时会显示如下:</div><div class="line">*(HEAD detached at origin/dev)</div><div class="line">master</div><div class="line">## 要想将本地之内提交到远程dev分支，只需要再</div><div class="line">git checkout -b dev # 这样就好了</div><div class="line">## 新建并切换分支</div><div class="line">git checkout -b dev</div><div class="line">## 强制覆盖本地分支</div><div class="line">git fetch --all</div><div class="line">git reset --hard origin/master</div><div class="line">## 合并分支</div><div class="line">### 在新的分支如bug-fix修改完成后，执行以下操作</div><div class="line">git checkout dev	# 切换回dev分支</div><div class="line">git merge bug-fix	# 将bug-fix合并到当前分支，即dev分支</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"># 标签操作</div><div class="line">git tag 									# 查看当前所有的标签</div><div class="line">git tag v1.0.0							# 在当前commit打一个标签</div><div class="line">git tag -d v1.0.0						# 删除一个标签</div><div class="line">git push origin v1.0.0					# 将打的标签推送到仓库</div><div class="line">git push origin :refs/tags/v1.0.0		# 本地删除标签后远程也要删除</div><div class="line"></div><div class="line"># 统计代码行数</div><div class="line">git log --author=&quot;$(git config --get user.name)&quot; --pretty=tformat: --numstat | gawk &apos;&#123; add += $1 ; subs += $2 ; loc += $1 - $2 &#125; END &#123; printf &quot;added lines: %s removed lines : %s total lines: %s\n&quot;,add,subs,loc &#125;&apos; -</div></pre></td></tr></table></figure>
<h2 id="贡献PR-Fork别人的项目"><a href="#贡献PR-Fork别人的项目" class="headerlink" title="贡献PR(Fork别人的项目)"></a>贡献PR(Fork别人的项目)</h2><p>如果希望给开源项目贡献代码或者直接修复bug，那么就需要涉及到fork了并提交了。步骤如下:</p>
<ol>
<li><p>fork别人的仓库到自己这里: 直接在github里面点击fork，即可在自己的代码仓库里面创建一个一模一样的仓库。</p>
</li>
<li><p>从自己的代码仓库clone下来，并开发。</p>
</li>
<li><p>开发完成后，commit到自己的代码仓库</p>
</li>
<li><p>在自己的项目创建Pull Request，指向到原开源项目中去。</p>
<p><img src="http://ojccjqhmb.bkt.clouddn.com/git_1.jpg" alt=""></p>
</li>
</ol>
<p><img src="http://ojccjqhmb.bkt.clouddn.com/git_2.jpg" alt=""></p>
<p>记得添加commit说明。</p>
<h2 id="多人协作"><a href="#多人协作" class="headerlink" title="多人协作"></a>多人协作</h2><p>参考文章：<a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013760174128707b935b0be6fc4fc6ace66c4f15618f8d000" target="_blank" rel="external">廖雪峰的官方网站</a><br>前提：已经在Github上创建了库并创建了一个新的分支，假设新分支名为dev，那么开发步骤如下：</p>
<ol>
<li><p>抓取远程分支到本地</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git clone git@github.com:haoflynet/test.git</div><div class="line">git branch      # 查看当前分支</div><div class="line">git checkout -b dev origin/dev  # 将本地的dev分支对应远程的origin/dev分支并切换到该分支</div><div class="line"></div><div class="line">git clone -b mybranch --single-branch git://sub.domain.com/repo.git # 直接拉取指定分支到本地</div></pre></td></tr></table></figure>
</li>
<li><p>在该分支下进行开发</p>
</li>
<li><p>修改完成后推送到远程dev分支</p>
<pre><code>git add .
git commit -m &quot;some modification&quot;
git push origin dev
</code></pre></li>
<li><p>修改并合并到master分支</p>
<pre><code>git checkout master # 首先切换到本地的master分支
git merge --no-ff   # 将本地的dev分支与本地的master分支合并
git pull            # 获取远程索引
</code></pre><p> 这一步可能这一步可能会冲突，原因当然是其他人在你之前对远程的master分支进行了修改并提交上去<br> 如果没有错，就直接推送<br> git push origin master</p>
</li>
</ol>
<h2 id="TroubleShooting"><a href="#TroubleShooting" class="headerlink" title="TroubleShooting"></a>TroubleShooting</h2><ul>
<li><p><strong>git checkout -b dev origin/dev出现错误fatal: cannot update paths and switch to branch ‘origin/dev’</strong><br>原因是未在远程创建dev分支，或者未在本地更新分支信息</p>
</li>
<li><p><strong>git remote add origin git@github.com:haoflynet/test，出现错误fatal: remote origin already exists</strong><br>原因是克隆别人的库下来修改后push到自己的库可能会出现这种错误，要先执行git remote rm origin  </p>
</li>
<li><p><strong>.gitignore无效，该忽略的依然没有被忽略</strong></p>
<pre><code>git rm -r --cached .
git add .
git commit -m &quot;fixed untracked files
</code></pre><p>这样会删除github上面已经提交了的但是现在忽略了的文件，如果要在github上面保留一份，那么执行git add -f filename</p>
</li>
<li><p><strong>There was a problem with the editor ‘vi’</strong><br>vi编辑器的问题吧，直接换成vim<br><code>git config --global core.editor $(which vim)</code></p>
</li>
<li><p><strong>更改文件名后，远程居然没有过更新</strong><br>git默认对文件名的大小写不敏感，需要在仓库执行<code>git config core.ignorecase false</code>让它对大小写敏感</p>
</li>
<li><p><strong><code>413 request entity too large</code></strong></p>
<p>发生这个问题是因为采用的是https而不是ssh方式来push仓库，而https传输数据的大小一般是由服务器，即nginx来控制的，太大了是传不上去的，这时候只需要更改为ssh方式即可。</p>
</li>
<li><p><strong>修改提交作者和邮箱</strong>: git可以通过<code>git filter-branch</code>修改已经提交了的commit的作者和邮箱。如果仅仅想修改一次的，可以直接<code>git commit --amend --author=&quot;haoflynet &lt;haoflynet@gmail.com&gt;&quot;</code>。这里有一个来自<a href="http://i.dotidea.cn/2015/04/git-amend-author/" target="_blank" rel="external">若有所思-胡磊</a>的批量修改的脚本:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">#!/bin/sh</div><div class="line"> </div><div class="line">git filter-branch --env-filter &apos;</div><div class="line"> </div><div class="line">an=&quot;$GIT_AUTHOR_NAME&quot;</div><div class="line">am=&quot;$GIT_AUTHOR_EMAIL&quot;</div><div class="line">cn=&quot;$GIT_COMMITTER_NAME&quot;</div><div class="line">cm=&quot;$GIT_COMMITTER_EMAIL&quot;</div><div class="line"> </div><div class="line">if [ &quot;$GIT_COMMITTER_EMAIL&quot; = &quot;[Your Old Email]&quot; ]</div><div class="line">then</div><div class="line">    cn=&quot;[Your New Author Name]&quot;</div><div class="line">    cm=&quot;[Your New Email]&quot;</div><div class="line">fi</div><div class="line">if [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;[Your Old Email]&quot; ]</div><div class="line">then</div><div class="line">    an=&quot;[Your New Author Name]&quot;</div><div class="line">    am=&quot;[Your New Email]&quot;</div><div class="line">fi</div><div class="line"> </div><div class="line">export GIT_AUTHOR_NAME=&quot;$an&quot;</div><div class="line">export GIT_AUTHOR_EMAIL=&quot;$am&quot;</div><div class="line">export GIT_COMMITTER_NAME=&quot;$cn&quot;</div><div class="line">export GIT_COMMITTER_EMAIL=&quot;$cm&quot;</div><div class="line">&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>​</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/fpm/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/fpm/" itemprop="url">
                  Fpm 打包工具
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-07T05:52:39+08:00">
                2016-08-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tools/" itemprop="url" rel="index">
                    <span itemprop="name">tools</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/fpm/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="fpm/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="fpm打包工具"><a href="#fpm打包工具" class="headerlink" title="fpm打包工具"></a>fpm打包工具</h1><h2 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h2><pre><code>yum install -y rpmbuild ruby-devel gcc
gem install fpm
fpm -h
</code></pre><h2 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h2><ul>
<li>-s: 源的类型，值可以为dir,rpm,gem,pyton</li>
<li>-t: 目标类型，值可以为rpm,deb,solaris,puppet</li>
<li>-n: 包名</li>
<li>-v: 版本号</li>
<li>-C: 指定在打包前需要进入的目录，相当于把那个目录打包</li>
<li>-d ‘名称’: 指定程序依赖，多个依赖的话就写多个-d</li>
<li>–before-install 名称.sh: 安装前执行的脚本</li>
<li>–after-install 名称.sh: 安装后执行的脚本</li>
<li>–before-remove 名称.sh: 卸载前执行的操作</li>
<li>–after-remove 名称.sh: 卸载后执行的操作</li>
<li>–prefix=目录: 指定软件之后要安装的路径</li>
<li>–description ‘这里写描述’</li>
<li>–url: 软件的网站</li>
</ul>
<h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><pre><code>rpm localinstall 包名 # 在新的机器上安装该软件
rpm -qpl 包名  # 查看包的信息
</code></pre><p><a href="http://www.z-dig.com/fpm-custom-nginx-rpm-package.html" target="_blank" rel="external">打包nginx例子</a></p>
<p>这是我打包tengine的命令<code>fpm -s dir -t rpm -n tengine -v 2.1.2 -C /etc/nginx -d &#39;pcre-devel&#39; -d &#39;openssl&#39; -d &#39;openssl-devel&#39; --before-install /share/before-install.sh --after-install /share/after-install.sh --before-remove /share/before-remove.sh --after-remove /share/after-remove.sh --description &#39;Haofly first fpm package&#39; --url &#39;http://haofly.net&#39; --prefix=/etc/nginx</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/python-coroutine-thread-协程和线程/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/python-coroutine-thread-协程和线程/" itemprop="url">
                  Python协程与线程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-04T11:02:30+08:00">
                2016-08-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/python-coroutine-thread-协程和线程/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="python-coroutine-thread-协程和线程/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="迭代器-生成器"><a href="#迭代器-生成器" class="headerlink" title="迭代器/生成器"></a>迭代器/生成器</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">next(iterator)		<span class="comment"># 返回下一个迭代对象</span></div><div class="line"><span class="keyword">yield</span> a 			<span class="comment"># 返回一个迭代对象</span></div><div class="line"><span class="keyword">yield</span> <span class="keyword">from</span> iterator	<span class="comment"># 相当于for x in iterator \ yield x</span></div><div class="line"></div><div class="line"><span class="comment"># 给生成器传值，例如</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">generator</span><span class="params">()</span>:</span></div><div class="line">    jump = <span class="keyword">yield</span> a</div><div class="line">next(iterator)		<span class="comment"># 给生成器赋非None值时，只能在开始迭代以后</span></div><div class="line">iterator.send(<span class="number">2</span>)	<span class="comment"># 传值给生成器，jump=2</span></div></pre></td></tr></table></figure>
<h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><p><strong>线程安全与线程不安全</strong>: 多个线程同时访问一个方法，得到的结果一样就是线程安全的，不一样则是线程不安全的。gevent库是基于事件驱动模型，它的线程是否安全完全看多线程程序是怎么写的，如果仅仅只有gevent一个线程那么不存在线程安全问题。</p>
<p>threading库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">lock = threading.Lock()</div><div class="line">lock.acquire()</div><div class="line">xxxxx</div><div class="line">lock.release()</div><div class="line"><span class="comment"># 更方便的使用：</span></div><div class="line">lock = threading.Lock()</div><div class="line"><span class="keyword">with</span> lock:</div><div class="line">	xxxxxxx</div></pre></td></tr></table></figure>
<h2 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h2><p>multiprocessing库</p>
<h2 id="线程池-进程池"><a href="#线程池-进程池" class="headerlink" title="线程池/进程池"></a>线程池/进程池</h2><p>Pool</p>
<h2 id="协程-asyncio"><a href="#协程-asyncio" class="headerlink" title="协程(asyncio)"></a>协程(asyncio)</h2><p>位于标准库中，使用协程来编写单线程的并发，通过IO多路复用技术访问套接字。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> asyncio</div><div class="line"></div><div class="line"><span class="comment"># 用装饰器来标记作为协程的函数</span></div><div class="line"><span class="meta">@asyncio.coroutine</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">countdown</span><span class="params">(number, n)</span>:</span></div><div class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span>:</div><div class="line">        print(<span class="string">'T-minus'</span>, n, <span class="string">'(&#123;&#125;)'</span>.format(number))</div><div class="line">        <span class="keyword">yield</span> <span class="keyword">from</span> asyncio.sleep(<span class="number">1</span>)	<span class="comment"># 这里会返回一个asyncio.Future对象并将其传递给时间循环，同时暂停这一协程的执行，时间循环监听这一对象，1秒钟后，时间循环会选择刚刚这个协程，将future对象的结果返回给它，然后协程继续执行。这一过程会持续到所有的协程程序全部完成。</span></div><div class="line">        n -= <span class="number">1</span></div><div class="line"></div><div class="line">loop = asyncio.get_event_loop()</div><div class="line">tasks = [</div><div class="line">    asyncio.ensure_future(countdown(<span class="string">"A"</span>, <span class="number">2</span>)),</div><div class="line">    asyncio.ensure_future(countdown(<span class="string">"B"</span>, <span class="number">3</span>))]</div><div class="line">loop.run_until_complete(asyncio.wait(tasks))</div><div class="line">loop.close()</div><div class="line"></div><div class="line"><span class="comment"># 在3.5里面，有了新的语法，添加了types.coroutine修饰器</span></div><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">slow_operation</span><span class="params">(n)</span>:</span>		<span class="comment"># 以这种方式定义协程，在协程里面不能有yield语句，只有return和await可以用于返回</span></div><div class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">1</span>)	<span class="comment"># await接受的对象必须是awaitable对象，必须是定义了__await__()方法且这一方法必须返回一个不是协程的迭代器，协程本身也被认为是awaitable对象</span></div><div class="line">    print(<span class="string">'Slow operation &#123;&#125; complete'</span>.format(n))</div><div class="line"></div><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">await</span> asyncio.wait([</div><div class="line">        slow_operation(<span class="number">1</span>),</div><div class="line">        slow_operation(<span class="number">2</span>),</div><div class="line">        slow_operation(<span class="number">3</span>),</div><div class="line">        ])</div><div class="line"></div><div class="line">loop = asyncio.get_event_loop()</div><div class="line">loop.run_until_complete(main())</div><div class="line">loop.close()</div></pre></td></tr></table></figure>
<h2 id="并发框架"><a href="#并发框架" class="headerlink" title="并发框架"></a>并发框架</h2><h3 id="concurrent-futures"><a href="#concurrent-futures" class="headerlink" title="concurrent.futures"></a>concurrent.futures</h3><p>该库通过相同的API同时支持线程与协程，以POOL的方式进行并行任务的管理。其中<code>Executors</code>用于管理<code>workers</code>，而<code>futures</code>则用于表示一个异步计算的结果，当调用future时会被立即返回，但是不一定就是最终结果。</p>
<p><code>ThreadPoolExcutor</code>改为<code>ProcessPoolExecutor</code>就是线程了，真方便。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 来源: https://pymotw.com/3/concurrent.futures/</span></div><div class="line"><span class="comment"># 该例表示一个最大执行进程数为2个的执行器，同时处理5个任务</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">task</span><span class="params">(n)</span>:</span></div><div class="line">    print(<span class="string">'&#123;&#125;: sleeping &#123;&#125;'</span>.format(</div><div class="line">        threading.current_thread().name,</div><div class="line">        n)</div><div class="line">    )</div><div class="line">    time.sleep(n / <span class="number">10</span>)</div><div class="line">    print(<span class="string">'&#123;&#125;: done with &#123;&#125;'</span>.format(</div><div class="line">        threading.current_thread().name,</div><div class="line">        n)</div><div class="line">    )</div><div class="line">    <span class="keyword">return</span> n / <span class="number">10</span></div><div class="line"></div><div class="line">ex = futures.ThreadPoolExecutor(max_workers=<span class="number">2</span>)</div><div class="line">print(<span class="string">'main: starting'</span>)</div><div class="line">results = ex.map(task, range(<span class="number">5</span>, <span class="number">0</span>, <span class="number">-1</span>))</div><div class="line">print(<span class="string">'main: unprocessed results &#123;&#125;'</span>.format(results))	<span class="comment"># 这里返回的是一个迭代器</span></div><div class="line">print(<span class="string">'main: waiting for real results'</span>)</div><div class="line">real_results = list(results)</div><div class="line">print(<span class="string">'main: results: &#123;&#125;'</span>.format(real_results)) <span class="comment"># 返回真实的结果</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 用map只能处理相同的任务，可以通过submit来执行需要执行的任务</span></div><div class="line"><span class="keyword">from</span> concurrent <span class="keyword">import</span> futures</div><div class="line"><span class="keyword">import</span> threading</div><div class="line"><span class="keyword">import</span> time</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">task</span><span class="params">(n)</span>:</span></div><div class="line">    print(<span class="string">'&#123;&#125;: sleeping &#123;&#125;'</span>.format(</div><div class="line">        threading.current_thread().name,</div><div class="line">        n)</div><div class="line">    )</div><div class="line">    time.sleep(n / <span class="number">10</span>)</div><div class="line">    print(<span class="string">'&#123;&#125;: done with &#123;&#125;'</span>.format(</div><div class="line">        threading.current_thread().name,</div><div class="line">        n)</div><div class="line">    )</div><div class="line">    <span class="keyword">return</span> n / <span class="number">10</span></div><div class="line"></div><div class="line">ex = futures.ThreadPoolExecutor(max_workers=<span class="number">2</span>)</div><div class="line">print(<span class="string">'main: starting'</span>)</div><div class="line">f = ex.submit(task, <span class="number">5</span>)</div><div class="line">print(<span class="string">'main: future: &#123;&#125;'</span>.format(f))</div><div class="line">print(<span class="string">'main: waiting for results'</span>)</div><div class="line">result = f.result()</div><div class="line">print(<span class="string">'main: result: &#123;&#125;'</span>.format(result))</div><div class="line">print(<span class="string">'main: future after result: &#123;&#125;'</span>.format(f))</div><div class="line"></div><div class="line"><span class="comment"># 不按照顺序来获取结果，只要有个任务完成，就执行输出结果，上面那几个方法必须等所有任务执行完了顺序输出，而这个则是只要完成一个就输出一个</span></div><div class="line">wait_for = [</div><div class="line">    ex.submit(task, i)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>, <span class="number">0</span>, <span class="number">-1</span>)</div><div class="line">]</div><div class="line"><span class="keyword">for</span> f <span class="keyword">in</span> futures.as_completed(wait_for):</div><div class="line">    print(<span class="string">'main: result: &#123;&#125;'</span>.format(f.result()))</div></pre></td></tr></table></figure>
<h4 id="回调"><a href="#回调" class="headerlink" title="回调"></a>回调</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> concurrent <span class="keyword">import</span> futures</div><div class="line"><span class="keyword">import</span> time</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">task</span><span class="params">(n)</span>:</span></div><div class="line">    print(<span class="string">'&#123;&#125;: sleeping'</span>.format(n))</div><div class="line">    time.sleep(<span class="number">0.5</span>)</div><div class="line">    print(<span class="string">'&#123;&#125;: done'</span>.format(n))</div><div class="line">    <span class="keyword">return</span> n / <span class="number">10</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">done</span><span class="params">(fn)</span>:</span></div><div class="line">    <span class="keyword">if</span> fn.cancelled():</div><div class="line">        print(<span class="string">'&#123;&#125;: canceled'</span>.format(fn.arg))</div><div class="line">    <span class="keyword">elif</span> fn.done():</div><div class="line">        error = fn.exception()</div><div class="line">        <span class="keyword">if</span> error:</div><div class="line">            print(<span class="string">'&#123;&#125;: error returned: &#123;&#125;'</span>.format(</div><div class="line">                fn.arg, error))</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            result = fn.result()</div><div class="line">            print(<span class="string">'&#123;&#125;: value returned: &#123;&#125;'</span>.format(</div><div class="line">                fn.arg, result))</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    ex = futures.ThreadPoolExecutor(max_workers=<span class="number">2</span>)</div><div class="line">    print(<span class="string">'main: starting'</span>)</div><div class="line">    f = ex.submit(task, <span class="number">5</span>)</div><div class="line">    f.arg = <span class="number">5</span></div><div class="line">    f.add_done_callback(done)</div><div class="line">    result = f.result()</div></pre></td></tr></table></figure>
<h4 id="任务的取消"><a href="#任务的取消" class="headerlink" title="任务的取消"></a>任务的取消</h4><p><code>Future</code>只要还未开始就能被取消，f.cancel()</p>
<h4 id="任务的异常"><a href="#任务的异常" class="headerlink" title="任务的异常"></a>任务的异常</h4><p>通过<code>f.exception()</code>可以获取到任务抛出了什么样的异常</p>
<h3 id="gevent"><a href="#gevent" class="headerlink" title="gevent"></a>gevent</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 最简单的使用</span></div><div class="line"><span class="keyword">import</span> gevent</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">()</span>:</span></div><div class="line">    print(<span class="string">'Running in foo'</span>)</div><div class="line">    gevent.sleep(<span class="number">0</span>)</div><div class="line">    print(<span class="string">'Explicit context switch to foo again'</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(abc)</span>:</span></div><div class="line">    print(<span class="string">'Explicit context to bar'</span>)</div><div class="line">    gevent.sleep(<span class="number">0</span>)</div><div class="line">    print(<span class="string">'Implicit context switch back to bar'</span>)</div><div class="line"></div><div class="line">gevent.joinall([		<span class="comment"># 把gevent.spawn()放到joinall过后才会真正开始执行</span></div><div class="line">    gevent.spawn(foo),</div><div class="line">    gevent.spawn(bar, <span class="string">'参数'</span>),</div><div class="line">])</div><div class="line"></div><div class="line">print(<span class="string">'abc'</span>)	<span class="comment"># 这行代码会等待所有协程执行完了过后才会执行</span></div></pre></td></tr></table></figure>
<p>``</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/phpmyadmin/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/phpmyadmin/" itemprop="url">
                  phpMyAdmin教程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-03T11:02:30+08:00">
                2016-08-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/php/" itemprop="url" rel="index">
                    <span itemprop="name">php</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/phpmyadmin/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="phpmyadmin/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="phpMyAdmin"><a href="#phpMyAdmin" class="headerlink" title="phpMyAdmin"></a>phpMyAdmin</h1><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-phpmyadmin-on-a-centos-6-4-vps" target="_blank" rel="external">CentOS 6.4安装phpMyAdmin</a></p>
<h3 id="连接多个主机的配置"><a href="#连接多个主机的配置" class="headerlink" title="连接多个主机的配置"></a>连接多个主机的配置</h3><p><a href="http://blog.51yip.com/mysql/1250.html" target="_blank" rel="external">参考文章</a><br>配置如下：</p>
<ol>
<li>将phpMyAdmin根目录下的config.sample.inc.php，重命名为config.inc.php</li>
<li><p>修改config.inc.php文件，添加如下内容：</p>
<pre><code>$connect_hosts = array(
    1 =&gt; array(
        &quot;host&quot;    =&gt; &quot;127.0.0.1&quot;,
        &quot;port&quot;    =&gt; &quot;3307&quot;,
        &quot;socket&quot;=&gt; &quot;/tmp/mysql.sock2&quot;,
        &quot;user&quot;    =&gt; &quot;root&quot;,
        &quot;password&quot;    =&gt; &quot;mysql&quot;,
        &quot;connect_type&quot;    =&gt; &quot;socket&quot;
        ),
    2 =&gt; array(
        &quot;host&quot;    =&gt; &quot;127.0.0.1&quot;,
        &quot;port&quot;    =&gt; &quot;3309&quot;,
        &quot;user&quot;    =&gt; &quot;root&quot;,
        &quot;password&quot;    =&gt; &quot;mysql&quot;,
        &quot;connect_type&quot;    =&gt; &quot;tcp&quot;
        )
    );

for ($i=1;$i&lt;=count($connect_hosts);$i++){  
    $cfg[&apos;Servers&apos;][$i][&apos;auth_type&apos;] = &apos;cookie&apos;;  
    $cfg[&apos;Servers&apos;][$i][&apos;host&apos;] = $connect_hosts[$i][&apos;host&apos;];   //修改host  
    $cfg[&apos;Servers&apos;][$i][&apos;connect_type&apos;] = $conenct_hosts[$i][&apos;connect_type&apos;];  
    $cfg[&apos;Servers&apos;][$i][&apos;port&apos;] = $connect_hosts[$i][&apos;port&apos;];
    if (array_key_exists(&apos;socket&apos;, $connect_hosts[$i])){
    $cfg[&apos;Servers&apos;][$i][&apos;socket&apos;] = $conenct_hosts[$i][&apos;socket&apos;];
    }
    $cfg[&apos;Servers&apos;][$i][&apos;compress&apos;] = false;  
    $cfg[&apos;Servers&apos;][$i][&apos;extension&apos;] = &apos;mysql&apos;;  
    $cfg[&apos;Servers&apos;][$i][&apos;AllowNoPassword&apos;] = true;  
    $cfg[&apos;Servers&apos;][$i][&apos;user&apos;] = $connect_hosts[$i][&apos;user&apos;];  //修改用户名  
    $cfg[&apos;Servers&apos;][$i][&apos;password&apos;] = $connect_hosts[$i][&apos;password&apos;]; //密码  
    $cfg[&apos;Servers&apos;][$i][&apos;bs_garbage_threshold&apos;] = 50;  
    $cfg[&apos;Servers&apos;][$i][&apos;bs_repository_threshold&apos;] = &apos;32M&apos;;  
    $cfg[&apos;Servers&apos;][$i][&apos;bs_temp_blob_timeout&apos;] = 600;  
    $cfg[&apos;Servers&apos;][$i][&apos;bs_temp_log_threshold&apos;] = &apos;32M&apos;;  
}
</code></pre></li>
<li>重启apache</li>
</ol>
<h2 id="TroubleShooting"><a href="#TroubleShooting" class="headerlink" title="TroubleShooting"></a>TroubleShooting</h2><ul>
<li>如果出现<code>#2002 无法登录 MySQL 服务器</code>错误，可能是地址填写的是localhost而不是127.0.0.1所致</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/PHP编码规范/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/PHP编码规范/" itemprop="url">
                  PHP编码规范
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-01T10:02:30+08:00">
                2016-08-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/php/" itemprop="url" rel="index">
                    <span itemprop="name">php</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/PHP编码规范/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="PHP编码规范/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="PHP编码规范"><a href="#PHP编码规范" class="headerlink" title="PHP编码规范"></a>PHP编码规范</h1><h3 id="文档注释"><a href="#文档注释" class="headerlink" title="文档注释"></a>文档注释</h3><pre><code>&lt;?php
/**
 * 功能

 * author：haofly
 * Datetime: 2016-03-30 14:40
 */
?&gt;
</code></pre><h3 id="变量注释"><a href="#变量注释" class="headerlink" title="变量注释"></a>变量注释</h3><pre><code>/**
 * 变量功能
 * @var string
 */
private $_variable
</code></pre><h3 id="函数注释"><a href="#函数注释" class="headerlink" title="函数注释"></a>函数注释</h3><pre><code>/**
 * 函数功能
 * @return void
 */
private function _hanshu(){
    ...
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/saltstack/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/saltstack/" itemprop="url">
                  SaltStack
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-01T01:02:30+08:00">
                2016-08-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/server/" itemprop="url" rel="index">
                    <span itemprop="name">server</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/saltstack/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="saltstack/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="SaltStack"><a href="#SaltStack" class="headerlink" title="SaltStack"></a>SaltStack</h1><p>salt-minion是可以在单价运行的，相当于就在本机运行，以masterless方式运行。<br>master需要开启4505和4506端口</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><pre><code># 服务器端
rpm -Uvh --force
取消/etc/salt/master里面的注释interface: 0.0.0.0

# 客户端
vim /etc/salt/minion
master: salt 取消注释，这里写master的地址
id:     # 指定ID，如果不指定，默认应该是hostname
log_file: /var/log/salt/minion # 取消注释，打开日志
key_logfile: /var/log/salt/key # 取消注释，打开日志

# 重启两个端过后
在master端执行：
salt-key -L     # 查看是否有证书签发请求
salt-key -a 刚才查出来的ID # 同意签发证书

# 测试，在master执行一条命令
salt &apos;刚才的id&apos; cmd.run &apos;hostname&apos;
</code></pre><h1 id="创建state"><a href="#创建state" class="headerlink" title="创建state"></a>创建state</h1><pre><code># 首先得有一个/srv/salt/top.sls，这是必须的
base:                # 相当于仓库
  &apos;*&apos;:                # 对象名，*表示所有的minion
    - webserver    # 自定义的资源名

# 针对上面定义的每一个资源需要有相应的配置文件，例如/srv/salt/webserver.sls，以下配置来自http://blog.sctux.com/?p=278
apache:                # 自定义的资源ID
  pkg.installed:        # 包管理方式安装下面的包
    - names:
      - httpd
      - httpd-devel
  service.running:    # 模块名
    - name: httpd    # 要启动的service
    - enable: True    # 开机启动
    - reload: True    # 监视下面的文件，如果有变动就重启
    - watch:
      - file: /var/www/html/index.html
    - require:
      - pkg: httpd    # 启动服务的前提是有这个包
  file.managed:        # 模块名
    - name: /var/www/html/index.html    # 目的文件
    - source: salt://index.html        # 源文件
    - user: apache                        # 文件所有者
    - group: root
    - mode: 644
    - backup: minion                    # 改变之前备份
    - require:
      - pkg: httpd

# 官网提供的另外的写法
apache:
  pkg:                # 声明state
    - installed        # 声明函数
</code></pre><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><pre><code># 执行远程命令
salt &apos;目标&apos; &lt;function&gt; [arguments]
salt &apos;*&apos; test.ping    # ping一下所有的主机
salt -G &apos;os:Ubuntu&apos; test.ping # 可以指定某一种系统
salt -E &apos;virtmach[0-9]&apos; test.ping # 还能使用正则
salt -L &apos;foo,bar,baz,quo&apos; test.ping    # 多个minion
salt -C &apos;G@os:Ubuntu and webser* or E@database.*&apos; test.ping    # 反正就是想要的语法都有

# 系统自带的函数
salt &apos;*&apos; sys.doc
salt &apos;*&apos; test.ping
salt &apos;*&apos; cmd.run &apos;uname -a&apos;    # 这就是执行命令
salt &apos;*&apos; cmd.exec_code python &apos;import sys; print sys.version&apos;
salt &apos;*&apos; pip.install salt timeout=5 upgrade=True
salt &apos;*&apos; state.highstate # 将配置发往minion
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/lamp/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/lamp/" itemprop="url">
                  LAMP
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-28T22:52:39+08:00">
                2016-07-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/server/" itemprop="url" rel="index">
                    <span itemprop="name">server</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/lamp/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="lamp/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="LAMP"><a href="#LAMP" class="headerlink" title="LAMP"></a>LAMP</h1><p>Linux+Apache+MySQL+PHP，这是最流行也是我最熟悉的服务器架构了，其实网上有很多一键安装的版本，有些版本的linux甚至提供了<em><strong>apt<br>-get install lamp</strong></em>这样的一键安装程序，但是虽然他们是一个整体，但为了保证其独立性，我还是每次安装都会分别安装的。特别是某些框架或者是l<br>inux下的管理软件(比如现在所使用的禅道管理软件)在安装的时候经常都会有独立的打包程序，但我觉得那样会破坏apache等服务的独立性，所以独立安装，感觉舒<br>服一点。下面介绍一下安装过程：</p>
<h2 id="CentOS-6-x-Apache-Mariadb-PHP"><a href="#CentOS-6-x-Apache-Mariadb-PHP" class="headerlink" title="CentOS 6.x + Apache + Mariadb + PHP"></a>CentOS 6.x + Apache + Mariadb + PHP</h2><p><a href="https://yhigu.wordpress.com/2016/03/02/install-latest-version-of-apach-and-php-on-centos-6-7-from-source-code/" target="_blank" rel="external">编译方式安装</a><br><a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-on-centos-6" target="_blank" rel="external">CentOS安装LNMP</a><br><a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-on-centos-6" target="_blank" rel="external">包管理方式安装:</a><br><strong>apache</strong>：</p>
<pre><code>sudo yum install httpd -y
sudo service httpd start
</code></pre><p><strong>mariadb</strong>：添加文件<code>/etc/yum.repos.d/MariaDB.repo</code>，内容如下：</p>
<pre><code>[mariadb]
name = MariaDB
baseurl = http://yum.mariadb.org/5.5/centos6-amd64/
gpgkey = https://yum.mariadb.org/RPM-GPG-KEY-MariaDB
gpgcheck = 1
</code></pre><p>然后进行安装</p>
<pre><code># 安装Mariadb
sudo yum install MariaDB-server MariaDB-client
# 启动数据库
sudo /etc/init.d/mysql start

# 如果出现无法更改数据库初始化密码的情况，可先stop mysql，然后通过下面的方式跳过验证来启动mysql即可更改密码：mysqld_safe --skip-grant-tables
</code></pre><p><strong>php</strong>：</p>
<pre><code>sudo yum install php php-mysql
</code></pre><p><strong>自动启动</strong>：</p>
<pre><code>sudo chkconfig httpd on
sudo chkconfig mysqld on
</code></pre><h1 id="环境：Ubuntu14-04-server"><a href="#环境：Ubuntu14-04-server" class="headerlink" title="环境：Ubuntu14.04 server"></a>环境：Ubuntu14.04 server</h1><p>如果是CentOS 7可参考<a href="http://www.howtoforge.com/apache_php_mysql_on_centos_7_lamp" target="_blank" rel="external">http://www.howtoforge.com/apache_php_mysql_on_centos_7_lamp</a></p>
<h1 id="MySQL安装"><a href="#MySQL安装" class="headerlink" title="MySQL安装"></a>MySQL安装</h1><pre><code>apt-get install mysql-server mysql-client
</code></pre><h1 id="Apache安装"><a href="#Apache安装" class="headerlink" title="Apache安装"></a>Apache安装</h1><pre><code>apt-get install apache2
</code></pre><h1 id="PHP安装"><a href="#PHP安装" class="headerlink" title="PHP安装"></a>PHP安装</h1><p>最好把所需要的包都安装上，如果无法一次安装就依次安装吧</p>
<pre><code>apt-get install php5 libapache2-mod-php5 php5-json php5-gd php5-ldap php5-odbc php5-xmlrpc curl mcrypt php5-mysql php5-curl php5-idn php-pear php5-imagick php5-imap php5-mcrypt php5-memcache php5-ming php5-ps php5-pspell php5-recode php5-sqlite php5-tidy php5-xsl
</code></pre><p>以下是一些模块的具体功能：</p>
<pre><code>php5-mysql：操作MySQL数据库
</code></pre><p>安装完成以后，可以在<em><strong>/var/www/html</strong></em>中编写一个测试程序phpinfo.php：</p>
<pre><code>&lt;?php
phpinfo();
?&gt;
</code></pre><p>最后在浏览器中输入<a href="http://localhost/phpinfo.php，(如果是远程就直接把localhost替换成对应的IP即可)即可出现如下php
信息页面" target="_blank" rel="external">http://localhost/phpinfo.php，(如果是远程就直接把localhost替换成对应的IP即可)即可出现如下php
信息页面</a>：<br><img src="http://7xnc86.com1.z0.glb.clouddn.com/linux-install-lamp_0.jpg" alt=""><br><strong>PS：</strong></p>
<p>mcrypt模块就是laravel所需要的模块，如果没有那么打开laravel就会出现<strong><em>Mcrypt PHP extension<br>required.</em></strong>的错误，所以，必须进行声明。如果是后来才install mcrypt模块的那么还需要加载一下<code>sudo php5enmod
mcrypt</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/web开发约定/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/web开发约定/" itemprop="url">
                  Web开发习惯
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-27T22:52:39+08:00">
                2016-07-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/code/" itemprop="url" rel="index">
                    <span itemprop="name">code</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/web开发约定/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="web开发约定/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="web开发约定"><a href="#web开发约定" class="headerlink" title="web开发约定"></a>web开发约定</h1><h2 id="web部署结构"><a href="#web部署结构" class="headerlink" title="web部署结构"></a>web部署结构</h2><p>仅用于轻量级web框架，来自于<a href="https://github.com/qiwsir/TornadoWheel" target="_blank" rel="external">TornadoWheel</a></p>
<pre><code>.工程目录
├── server.py            # 启动服务
├── application.py    # 服务基本设置
├── url.py            # 路由结构
├── handler/            # 各种请求处理类文件
├── static/            # 静态文件
├── optsql/            # 与数据库读写相关的文件
└── template            # 模板文件
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/renshegnyuanbiancheng/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/renshegnyuanbiancheng/" itemprop="url">
                  MacTalk 人生元编程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-24T18:38:44+08:00">
                2016-07-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程之路/" itemprop="url" rel="index">
                    <span itemprop="name">编程之路</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/renshegnyuanbiancheng/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="renshegnyuanbiancheng/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我不知道有多少人因为池老师的一篇《先有Mac还是先有钱》而去买的苹果电脑，我现在也在用rmbp，但我可不是因为这个原因。从大一到大三，我那台宏碁的笔记本一直陪伴在我身边，经历了我各种摧残，更换了无数的操作系统(windows、linux系列的)，曾经最长用了半年的deepin单系统。虽说我自认为我用电脑一定比其他人用得好，毕竟一台三千多的电脑能用出人家五六千电脑的流畅度，但是依然不尽如我意。折腾累了，最终在大三结束刚进入实习期的我就找父母拿钱买了一台15年乞丐版的rmbp。刚好快一年了，这一年，mac带给我最大的感受就是我几乎没有任何感受…我已经完全忘记了去折腾电脑了，重装系统、电脑卡顿、木马病毒，统统都没有，我甚至都忘记了他们的存在了。买windows是买电脑送系统，买mac则是买系统送电脑。mac带给我们更多的是一种享受，我愿意为这样的服务买单。</p>
<p>作为一本talk mac的书籍，当然不乏众多的mac使用技巧，osx的强大，远比我当前的使用方式更强大，还需要我去探索。当然，现在的我已经不再是工具控了，因为我已经找到了一套自己认为最适合自己的工具，不用再为新工具的出现而浪费时间了。除了一些使用技巧外，池健强老师还谈了一些对编程的看法。让我了解了一个人，王小波，对他几乎没有什么认识，我想，我也该去拜读一下他的书了。</p>
<p>关于盗版，我的博客很早就有一篇《学生应该尽量购买正版书籍》，上个月从学校回来，收拾了一箱子舍不得卖的书，几乎全是在当当或者亚马逊上买的，这，也算是我对这些作者表达的基本的尊重。同时，在使用了mac过后，我的电脑／手机都与盗版彻底绝缘了。从此可以问心无愧地进行开发，也希望自己开发的东西有一天能让大众享受，能让用户主动掏钱。以下是池老师关于盗版的言论：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1.盗版肯定是不对的，如果用了盗版软件，至少要有愧疚之心。如果你是个穷学生，学习软件开发用了盗版软件，谁忍心责备你呢？但大家千万不能无耻到开篇提到的那位父亲那样，不仅误己，而且误人。 2.程序员也是要吃饭的，你们每个人在自己的电脑上使用的每个软件都是程序员一行行的代码敲出来的。 3.在经济实力允许的基础上，尽可能用正版，尤其是程序员。程序员不支持程序员，还怎么指望别人呢？</div></pre></td></tr></table></figure>
<p>池老师也算是很多新一代程序员的领路人，不知道他现在怎么样了，不过，我算是真正走上了这条路了，一切，才刚刚开始。</p>
<h3 id="语录"><a href="#语录" class="headerlink" title="语录"></a>语录</h3><ul>
<li>反观观国内，很多公司把企业文化作为一种“秀”或“工具”，这就比较扯淡了。我觉得搞好企业文化，就两点： 1.利益，把公司利益和员工联系在一起，好员工钱得给足。 2.人文，少搞或不搞办公室政治，让员工自由一点、开放一点、平等一点，你会获得回报。 对于员工本身来说，不管企业是什么文化，</li>
<li>是啊，人怎么会有那么多时间学习那么多东西呢？其实这个不可能的设定，是在保证你有足够时间看电视、看美剧、刷微博、上网闲逛的基础之上的。只要把上述这些事情消费的时间减少一半，拿来持续学习，你就会发现学习效果是惊人的。</li>
</ul>
<ul>
<li>有一些穿高跟鞋走不到的路，有一些喷着香水闻不到的空气，有一些在楼宇里永远遇不到的人。</li>
</ul>
<ul>
<li>很多时候我们初入江湖，不知深浅，不知道什么事能做，怎么做，为什么要这么做，即使怯生生问了，得到的答复往往是，That’s just the way it’s done（我们向来这么做），于是我们慢慢也变得成熟、圆滑和懒惰，不再去从深层次思考『为什么要这么做？』因为别人也这么做。慢慢的，这些东西就成为了folklore（陈规陋习）。 一个坏的习惯或传统，可能延续十年、百年、千年，直到那个打破陈规陋习的人出现！ 提问、思考和努力工作，你就会抛弃这些陈规陋习，找到布满荆棘也满是鲜花的另一条鲜活的路。</li>
<li>经验告诉我，优秀的人才是那些一心想着产品的人，而不是关注管理和流程本身。</li>
<li>乔布斯认为，人活着是为了追求极致并分享美好的东西给人类，而不是做三流产品并赚钱。这样社会才能进步，让更多的人欣赏到更美好的东西。微软不过是另一个麦当劳，哈哈。</li>
<li>我以为我是个盖世程序猿，有一天我的程序会奔跑在千万台服务器上。我猜中了前头，可是我猜不着这结局……我们说，呸，你丫从头就错了！ </li>
<li>有人问，你为什么要从事IT技术研发工作？如果是乔布斯，可能的答案是改变世界；如果是人生导师，可能的答案是跟随你心。如果是我回答呢，答案就是如果不从事这个行业的话呢，我还真不知道该如何养家糊口</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="haofly" />
          <p class="site-author-name" itemprop="name">haofly</p>
          <p class="site-description motion-element" itemprop="description">豪翔天下的个人博客</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives/">
              <span class="site-state-item-count">228</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/haoflynet" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/haoflynet" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              小伙伴们
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.phodal.com" title="Phodal" target="_blank">Phodal</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://zkzhao.github.io/" title="zkzhao" target="_blank">zkzhao</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.qingguoing.com/" title="倾国倾城的博客" target="_blank">倾国倾城的博客</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">haofly</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"haoflynet"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
