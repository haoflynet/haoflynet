<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="豪翔天下" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="豪翔天下的个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="豪翔天下">
<meta property="og:url" content="https://haofly.net/index.html">
<meta property="og:site_name" content="豪翔天下">
<meta property="og:description" content="豪翔天下的个人博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="豪翔天下">
<meta name="twitter:description" content="豪翔天下的个人博客">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="https://haofly.net/"/>

  <title> 豪翔天下 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47480072-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">豪翔天下</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Change My World by Program</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-favorites">
          <a href="/favorites.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-flag"></i> <br />
            
            收藏
          </a>
        </li>
      
        
        <li class="menu-item menu-item-wiki">
          <a href="https://wiki.haofly.net" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-key"></i> <br />
            
            wiki
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/permissions-system-little-user-much-privileges/" itemprop="url">
                  权限系统的构想(少用户多权限)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-08T18:40:30+08:00" content="2016-09-08">
              2016-09-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/编程之路/" itemprop="url" rel="index">
                    <span itemprop="name">编程之路</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/permissions-system-little-user-much-privileges/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="permissions-system-little-user-much-privileges/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近团队由于项目需求的增多，需要单独设计一个权限系统出来，参考了网上很多的权限/访问控制系统以及一些设计原则比如RBAC(Role-Based Access Control)，这里，记录一下自己对权限系统的一种构想。需要注意的是，RBAC中也有分组的概念，但是它的分组仅仅是为了将相同权限的人集中在一起。我的构想虽然没有分组的概念，但是也符合RBAC原则的，只是因为我做的更彻底，不仅将角色与权限直接关联，更是将用户与权限直接关联，产生了一定的冗余，更适用于人数少但是权限多的情况。</p>
<h3 id="实体表"><a href="#实体表" class="headerlink" title="实体表"></a>实体表</h3><p><strong>应用表</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段注释</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>app_id</td>
</tr>
</tbody>
</table>
<p><strong>角色表</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段注释</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>role_id</td>
</tr>
<tr>
<td>app_id</td>
<td>应用ID</td>
</tr>
<tr>
<td>name</td>
<td>名称(英文)</td>
</tr>
<tr>
<td>beta</td>
<td>备注</td>
</tr>
</tbody>
</table>
<p><strong>权限表</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段注释</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>privilege_id</td>
</tr>
<tr>
<td>app_id</td>
<td>应用ID，不提供表示通用的权限</td>
</tr>
<tr>
<td>name</td>
<td>名称(英文)</td>
</tr>
<tr>
<td>beta</td>
<td>备注</td>
</tr>
</tbody>
</table>
<p><strong>操作表</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段注释</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>operator_id</td>
</tr>
<tr>
<td>app_id</td>
<td>不提供表示通用的操作</td>
</tr>
<tr>
<td>name</td>
<td>名称(英文)，例如: add, delete, edit, query</td>
</tr>
<tr>
<td>beta</td>
<td>备注</td>
</tr>
</tbody>
</table>
<h3 id="关联表"><a href="#关联表" class="headerlink" title="关联表"></a>关联表</h3><p><strong>用户与权限关联表</strong>:此表与角色权限对应表之间是有一定冗余的，但是考虑到个性化需求以及第三方APP的需要，所以在可以忍受的范围内</p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段注释</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td></td>
</tr>
<tr>
<td>user_id</td>
<td>用户ID</td>
</tr>
<tr>
<td>role_id</td>
<td>角色ID: 为0表示该权限是独立分配的，独立分配的优先</td>
</tr>
<tr>
<td>privilege_id</td>
<td>权限ID</td>
</tr>
<tr>
<td>operator_id</td>
<td>操作ID</td>
</tr>
<tr>
<td>disabled</td>
<td>boolean</td>
</tr>
</tbody>
</table>
<p><strong>角色与权限对应表</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段注释</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td></td>
</tr>
<tr>
<td>role_id</td>
<td>角色ID</td>
</tr>
<tr>
<td>privilege_id</td>
<td>权限ID</td>
</tr>
<tr>
<td>operator_id</td>
<td>操作ID</td>
</tr>
</tbody>
</table>
<p><strong>用户与角色对应表</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段注释</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td></td>
</tr>
<tr>
<td>role_id</td>
<td>角色ID</td>
</tr>
<tr>
<td>user_id</td>
<td>用户ID</td>
</tr>
</tbody>
</table>
<h3 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h3><p>添加权限: 直接添加<br>给单独用户添加权限: 保存在角色与权限表中，并将role_id标志为单独的那一个id<br>删除用户角色: 直接根据role_id进行disabled，添加了就不直接删除<br>删除用户权限：直接根据role_id进行disabled，也不直接删除<br>其他平台登录：只需要在登录的时候获取该用户在该平台的所有的额权限即可，连分组都不需要，因为权限都是在权限系统中进行统一登记注册的，所以其他平台不用单独存储权限列表，而只需要获取获取当前用户的权限，放到缓存里面即可，例如redis，可以直接存储为一个列表<code>user:privileges []</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/jieyouzahuodian/" itemprop="url">
                  读《解忧杂货店》
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-07T23:08:42+08:00" content="2016-09-07">
              2016-09-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/韦编三绝/" itemprop="url" rel="index">
                    <span itemprop="name">韦编三绝</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/jieyouzahuodian/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="jieyouzahuodian/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这本书在最近一年里面特别火，以前好多从来不看书的朋友都在朋友圈里发这本书的照片，仿佛大家一下子爱上了文字。我当然不会因为人家看我就看的，只是每次一看到这本书的名字，就不由得想起日本的情感电视剧《深夜食堂》，不知道为什么，就感觉他们可能会有好多相似的地方，应该会和《深夜食堂》一样，在很平淡的叙述中体会其中的韵味，引人入胜。于是最后，我还是看了。它和《深夜食堂》有相似的，也有不同的。《深夜食堂》是把精彩的故事写平淡，而《解忧杂货店》则是把本应该跌宕起伏的故事写得平淡，然后一步一步将错综复杂的故事串起来，功力同样深厚，毕竟是东野圭吾的作品，不得不叹服。</p>
<p>浪矢杂货店，一个连接过去与未来的杂货店，连接了一个老头与三个坏孩子一起帮助别人排忧解难的故事。通过几个矛盾人物与他们之间的书信交流来推动故事发展，更精妙的是几个矛盾人物之间又刚好有一丝丝的联系，联系虽然不深，但是却足以让人看到其中环环相扣的逻辑，被作者的思维所震撼。</p>
<p>我一直都像很多国人一样，哪怕自己过得再堕落，哪怕自己不相信大道理也要自以为是地告诫别人，偶尔，也会很认真地回应别人的玩笑，因为“我们也要尽可能帮助他人，你没有无视他开玩笑写的问题，而是认真回答，所以才回一直牢记在心里”。我希望自己能力所能及地帮助他人，特别是刚入编程领域的小学弟们，我很希望他们来问我问题，哪怕最简单的，哪怕最幼稚的，我也要认认真真地回答。遗憾的是，我并不是什么大神，所以找我咨询的学弟微乎其微呀。</p>
<p>人生，重要的是选择。作为一个挣扎于选择困难症不能自拔的天秤座的我来说，其实，很多时候在犹豫不决的时候，决定其实早就在自己心中，只是，要么因为各种客观原因，要么就是自己主观上的回避。最常见的莫过于购物的时候，说简单点就是没钱，所以才会犹豫不决，这个倒很好解决，多挣钱就行。又比如人生中的抉择，月兔想参加奥运会，但是怕选不上所以找了一个照顾男友的理由；克朗想成为歌手，然后又以照顾父亲为理由放弃追逐梦想。追逐梦想，能够轻松实现自己想要的，谁又不想呢。只是现实很多时候过于残酷，我们不知道继续坚持会不会得到自己期待的结果，只是从现在的情形看来，结果肯定不会太好，这个时候如果来了一个很合理的，连自己都能说服的理由，又何尝不想放弃呢，放弃多好，努力不一定成功，但不努力，一定很轻松。似乎，只要不是自己的原因，这样的理由就非常容易被接受，也不至于被身边的人嘲笑。但是，终究不过是自欺欺人。明明知道自己想要的，但还是选择逃避。不要轻易被自己的努力感动，真的，你做的努力相比于真正成功了的人，是微乎其微的。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/kanbokederendouxiangyaoganhuo/" itemprop="url">
                  看博客的人要的都是干货？
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-07T20:35:20+08:00" content="2016-08-07">
              2016-08-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/编程之路/" itemprop="url" rel="index">
                    <span itemprop="name">编程之路</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/kanbokederendouxiangyaoganhuo/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="kanbokederendouxiangyaoganhuo/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前几天，一位朋友突然问我道，为什么我的博客最近更新的都是有关读后感的，而少了以前那么多的技术干货。很欣慰，居然有朋友一直在看我的站点，虽然并没有看到它想看的，但是他所要的技术干货我现在其实也有，只是并没有放在主站，而是放在<a href="https://wiki.haofly.net" target="_blank" rel="external">豪翔天下的wiki</a>这个二级域名下。至于为什么，我想是因为厌倦了很多博客的内容样式，厌倦了很多教程的复制粘贴，才有了把它们一分为二的想法。</p>
<p>看了一下百度统计和谷歌Analytics，博客从13年至今，统计在内的PV总共有20000+，单日最高PV居然有1300+，但是平日里也就10左右。虽然我有用统计工具，但是几乎不会去关注这些统计结果，一直以来我写博客都是为了自己在写，即使是技术干货，也是为了方便自己以后查阅。但是最近又有了一些新的方法，我认为，我现在可以宣传自己了。以前的我很自卑，觉得自己写的东西，那肯定都是别人写过的，而且自己写的东西更是没有多少技术深度的东西，但是事实好像并不是这样。我最骄傲的地方就是与身边的不一样，我每天都在浏览着很多科技博客、技术新闻，以为自己一直是站在技术前沿的人，也意识到自己学的东西范围非常广，自己的深度也不够，眼前有很多路，却不知道该往哪里走。这就像一个瓶子，明明上面就是瓶颈了，但就是怎么做也钻不出去，甚至在往下掉。<br>到新公司也快半年了，新同事们很好，也很牛逼，感觉大家简直就像游侠一样，不想去北上广争夺，只想待在重庆这个小江湖，说实话，他们的技能水平，在北上广绝对也能称得上高手。这半年里，因为有人在旁边指导，在代码质量方面成长得挺快，至少现在写代码的时候能明显感觉到自己以前写的代码是有多么的bad smell。在给别人开发的时候也感觉自己的代码量真的太少了。以前都是自己开发自己的东西，觉得有时候有点错误没什么，但是给别人开发的过程中，一点儿不满意人家就会指出来，而且让人伤心的是，这里面起码有百分之五十确实是自己代码质量的问题。路漫漫其修远兮，编程之路，我还有很长的路要走。</p>
<p>前几天翻了以前的博客，我去，居然没有今年的年初计划，不禁思考，我这半年是怎么浑浑噩噩过来的，接下来的半年又该怎样浑浑噩噩地过呢。浑浑噩噩这个词我不喜欢，你说我懒我会接受，我懒得开心，但是说我浑浑噩噩，说我不思进取，那肯定是不行的。在这里，补一下下半年的目标:</p>
<ol>
<li>熟练日语五十音(说了很多次要学日语，结果到现在连五十音都还不认识，要想装逼，至少要会说吧)</li>
<li>结交三个以上IT界朋友(年龄相仿+忘年)</li>
<li>博客日访问量10+(我承认，现在的博客日访问量还有零的)</li>
<li>年底公司评级达到P4及以上(这就要求在公司好好工作啦)</li>
<li>给父母做全身检查(哪怕再缺钱也得做)</li>
<li>SegmentFault声望达到1000以上</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/renshegnyuanbiancheng/" itemprop="url">
                  MacTalk 人生元编程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-24T18:38:44+08:00" content="2016-07-24">
              2016-07-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/编程之路/" itemprop="url" rel="index">
                    <span itemprop="name">编程之路</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/renshegnyuanbiancheng/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="renshegnyuanbiancheng/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我不知道有多少人因为池老师的一篇《先有Mac还是先有钱》而去买的苹果电脑，我现在也在用rmbp，但我可不是因为这个原因。从大一到大三，我那台宏碁的笔记本一直陪伴在我身边，经历了我各种摧残，更换了无数的操作系统(windows、linux系列的)，曾经最长用了半年的deepin单系统。虽说我自认为我用电脑一定比其他人用得好，毕竟一台三千多的电脑能用出人家五六千电脑的流畅度，但是依然不尽如我意。折腾累了，最终在大三结束刚进入实习期的我就找父母拿钱买了一台15年乞丐版的rmbp。刚好快一年了，这一年，mac带给我最大的感受就是我几乎没有任何感受…我已经完全忘记了去折腾电脑了，重装系统、电脑卡顿、木马病毒，统统都没有，我甚至都忘记了他们的存在了。买windows是买电脑送系统，买mac则是买系统送电脑。mac带给我们更多的是一种享受，我愿意为这样的服务买单。</p>
<p>作为一本talk mac的书籍，当然不乏众多的mac使用技巧，osx的强大，远比我当前的使用方式更强大，还需要我去探索。当然，现在的我已经不再是工具控了，因为我已经找到了一套自己认为最适合自己的工具，不用再为新工具的出现而浪费时间了。除了一些使用技巧外，池健强老师还谈了一些对编程的看法。让我了解了一个人，王小波，对他几乎没有什么认识，我想，我也该去拜读一下他的书了。</p>
<p>关于盗版，我的博客很早就有一篇《学生应该尽量购买正版书籍》，上个月从学校回来，收拾了一箱子舍不得卖的书，几乎全是在当当或者亚马逊上买的，这，也算是我对这些作者表达的基本的尊重。同时，在使用了mac过后，我的电脑／手机都与盗版彻底绝缘了。从此可以问心无愧地进行开发，也希望自己开发的东西有一天能让大众享受，能让用户主动掏钱。以下是池老师关于盗版的言论：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1.盗版肯定是不对的，如果用了盗版软件，至少要有愧疚之心。如果你是个穷学生，学习软件开发用了盗版软件，谁忍心责备你呢？但大家千万不能无耻到开篇提到的那位父亲那样，不仅误己，而且误人。 2.程序员也是要吃饭的，你们每个人在自己的电脑上使用的每个软件都是程序员一行行的代码敲出来的。 3.在经济实力允许的基础上，尽可能用正版，尤其是程序员。程序员不支持程序员，还怎么指望别人呢？</div></pre></td></tr></table></figure>
<p>池老师也算是很多新一代程序员的领路人，不知道他现在怎么样了，不过，我算是真正走上了这条路了，一切，才刚刚开始。</p>
<h3 id="语录"><a href="#语录" class="headerlink" title="语录"></a>语录</h3><ul>
<li>反观观国内，很多公司把企业文化作为一种“秀”或“工具”，这就比较扯淡了。我觉得搞好企业文化，就两点： 1.利益，把公司利益和员工联系在一起，好员工钱得给足。 2.人文，少搞或不搞办公室政治，让员工自由一点、开放一点、平等一点，你会获得回报。 对于员工本身来说，不管企业是什么文化，</li>
<li>是啊，人怎么会有那么多时间学习那么多东西呢？其实这个不可能的设定，是在保证你有足够时间看电视、看美剧、刷微博、上网闲逛的基础之上的。只要把上述这些事情消费的时间减少一半，拿来持续学习，你就会发现学习效果是惊人的。</li>
</ul>
<ul>
<li>有一些穿高跟鞋走不到的路，有一些喷着香水闻不到的空气，有一些在楼宇里永远遇不到的人。</li>
</ul>
<ul>
<li>很多时候我们初入江湖，不知深浅，不知道什么事能做，怎么做，为什么要这么做，即使怯生生问了，得到的答复往往是，That’s just the way it’s done（我们向来这么做），于是我们慢慢也变得成熟、圆滑和懒惰，不再去从深层次思考『为什么要这么做？』因为别人也这么做。慢慢的，这些东西就成为了folklore（陈规陋习）。 一个坏的习惯或传统，可能延续十年、百年、千年，直到那个打破陈规陋习的人出现！ 提问、思考和努力工作，你就会抛弃这些陈规陋习，找到布满荆棘也满是鲜花的另一条鲜活的路。</li>
<li>经验告诉我，优秀的人才是那些一心想着产品的人，而不是关注管理和流程本身。</li>
<li>乔布斯认为，人活着是为了追求极致并分享美好的东西给人类，而不是做三流产品并赚钱。这样社会才能进步，让更多的人欣赏到更美好的东西。微软不过是另一个麦当劳，哈哈。</li>
<li>我以为我是个盖世程序猿，有一天我的程序会奔跑在千万台服务器上。我猜中了前头，可是我猜不着这结局……我们说，呸，你丫从头就错了！ </li>
<li>有人问，你为什么要从事IT技术研发工作？如果是乔布斯，可能的答案是改变世界；如果是人生导师，可能的答案是跟随你心。如果是我回答呢，答案就是如果不从事这个行业的话呢，我还真不知道该如何养家糊口</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/oauth-and-sso/" itemprop="url">
                  OAuth和SSO
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-16T14:08:00+08:00" content="2016-06-16">
              2016-06-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/编程之路/" itemprop="url" rel="index">
                    <span itemprop="name">编程之路</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/oauth-and-sso/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="oauth-and-sso/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考<a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html" target="_blank" rel="external">理解OAuth 2.0</a></p>
<p>目前网络上的数据传输普遍基于HTTP/HTTPS，然而，他们都是无状态的协议，也就是说你本次的请求与下一次的请求是毫无关系的，为了使得我们能够保存用户的状态，于是诞生了cookie，诞生了session，诞生了token，当然，这三者的概念其实都差不多，总体思想就是，在第一次请求过后，给用户生成唯一的一个标识，用户在下一次请求时，携带这个标识，这样服务端就能通过它来判断用户的状态以及合法性。</p>
<p>注意: OAuth确实增加了安全性，但是也增加了应用的复杂性，对于安全要求没那么高的应用，依然可以使用简单的加密算法进行双向加解密认证。</p>
<h2 id="OAuth"><a href="#OAuth" class="headerlink" title="OAuth"></a>OAuth</h2><p>OAuth主要用于社会化登录，仅仅需要一个系统来存储用户的信息，其他的系统或者第三方系统均可以使用，其他系统不需要维护自己的用户系统，免去了用户注册账号的麻烦，并且用户的密码等重要信息都集中保存在信任方，提高了安全性。</p>
<p>根据阮一峰的博客，客户端获取授权有以下几种认证方式:</p>
<ol>
<li>授权码模式（authorization code）: 是功能最完整、流程最严密的授权模式。它的特点就是通过客户端的后台服务器，与”服务提供商”的认证服务器进行互动。</li>
<li>简化模式（implicit）: 不通过第三方应用程序的服务器，直接在浏览器中向认证服务器申请令牌，跳过了”授权码”这个步骤，因此得名。所有步骤在浏览器中完成，令牌对访问者是可见的，且客户端不需要认证。</li>
<li>密码模式（resource owner password credentials）:用户向客户端提供自己的用户名和密码。客户端使用这些信息，向”服务商提供商”索要授权。</li>
<li>客户端模式（client credentials）:指客户端以自己的名义，而不是以用户的名义，向”服务提供商”进行认证。严格地说，客户端模式并不属于OAuth框架所要解决的问题。在这种模式中，用户直接向客户端注册，客户端以自己的名义要求”服务提供商”提供服务，其实不存在授权问题。</li>
</ol>
<p><img src="http://7xnc86.com1.z0.glb.clouddn.com/oauth-and-sso-1.png" alt="举个例子"><br>具体流程(感觉不用图也能说清楚呀):</p>
<ol>
<li>第三方站点获取未授权的Request Token</li>
<li>获取用户授权的Request Token</li>
<li>用授权的Request Token换取Access Token</li>
<li>通过Access Token访问该用户的资源</li>
</ol>
<p>另外，对于客户端的每一次获取token的请求，都对应着一定的权限，比如微博的第三方认证，通常仅有获取用户基本信息的权限，或者如github的权限就更加详细一点，包括获取基本信息，公开库的访问权限和私有库的访问权限(github的认证请求权限使用的是<code>X-OAuth-Scopes</code>作为参数放在请求头部，例如<code>user</code>，表示能获取用户的所有信息，而<code>user.email</code>则表示只能获取用户的邮箱)。</p>
<p>对于第三方应用，仅需要维护token的值，一般来说，有一种用户基本信息表，多张token存储表对应着多个公开应用。例如接入了微博的第三方可以有这么一张表: (id, user_id, weibo_id, weibo_access_token, weibo_expires)</p>
<p>注: 社会化登录的回调地址(callback_url)与返回地址(next)的区别，回调地址指用户点击第三方登录过后，由资源服务器回调到的地址，而返回地址则是用户欲访问的地址，一般为应用自己的首页，但也有可能是用户直接知道url后想去的地址，这时候可以在请求的时候带上next参数，然后由资源服务器原样返回过去。</p>
<p>最后，几乎所有关于OAuth的文章都会遗漏的一点，那就是资源服务器和认证服务器之间的认证。当访问者获取了token过后，向资源服务器发送请求时，资源服务器肯定会向认证服务器验证这个token的合法性，这也是一个很危险的步骤，在实际项目中，我将token与访问者的appkey一起进行认证，并且作为认证服务器同样要对资源服务器的认证请求一起认证。具体可参考<a href="http://stackoverflow.com/questions/12296017/how-to-validate-an-oauth-2-0-access-token-for-a-resource-server" target="_blank" rel="external">stackoverflow</a></p>
<h2 id="SSO-单点登录"><a href="#SSO-单点登录" class="headerlink" title="SSO(单点登录)"></a>SSO(单点登录)</h2><p>解决的是跨域的用户校验问题，常用于一个公司内部有多个子网站，然后提供统一的登录，一个站点登录过后其他站点不用重复登录。多用于存在多个子系统的公司。<br>具体流程:</p>
<ol>
<li>用户请求任意一个子站的login页面</li>
<li>用户输入用户名密码，子站将它传递给认证中心SSO Server</li>
<li>SSO Server验证成功后</li>
</ol>
<p>虽然SSO和OAuth是不一样的东西，但是我认为SSO只是OAuth的一种简化模式，可以归为OAuth的一类。通常由于子系统的域名不一样，不方便设置各自的cookie，于是这里又有两种解决方案:</p>
<ol>
<li>使用公共加解密函数进行双向加解密(加密字符串直接放在GET请求中)</li>
<li>同样使用公共的加解密函数，但是是使用JSOPN解决跨域问题(用户登录子应用时，会带上父应用域名下的cookie访问父应用提供的JSONP接口，父应用验证登录状态，最后返回加密后的用户信息)</li>
</ol>
<p>例如，本人在一个项目中所使用的认证流程:</p>
<p><img src="http://7xnc86.com1.z0.glb.clouddn.com/oauth-and-sso-2.png" alt="图片"></p>
<h2 id="签名算法的设计"><a href="#签名算法的设计" class="headerlink" title="签名算法的设计"></a>签名算法的设计</h2><p>无论是OAuth或是SSO都涉及到认证的过程，一般都不推荐使用可逆的加密算法，而使用单向的加密算法，只要双方对数据进行加密后的结果一致就表示该请求是合法的。参考网上很多的签名算法，最后总结了一下使用最广也是最安全的一种签名算法步骤:</p>
<ol>
<li>将请求的参数转换为’key=value’形式的字符串，如: “k1=v1”, “k2=v2”</li>
<li>将格式化后的字符串以字典升序进行排序，然后拼接在一起，如: “k1=v1k2=v2”</li>
<li>在拼接后的字符串的前后加上Secret Key，如：”keyk1=v1k2=v2key”</li>
<li>对拼接后的字符串进行MD5加密得到最终的结果</li>
</ol>
<h3 id="Python实现"><a href="#Python实现" class="headerlink" title="Python实现"></a>Python实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> hashlib</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">apiSign</span><span class="params">(parameters, secret)</span>:</span></div><div class="line">	keys = list(parameters.keys())</div><div class="line">	keys.sort()</div><div class="line"></div><div class="line">	parameters_str = <span class="string">"%s%s%s"</span> % (</div><div class="line">		secret,</div><div class="line">		str().join(<span class="string">'%s%s'</span> % (key, parameters[key]) <span class="keyword">for</span> key <span class="keyword">in</span> keys),</div><div class="line">		secret)</div><div class="line">	<span class="keyword">return</span> hashlib.md5(parameters_str.encode(<span class="string">'utf8'</span>)).hexdigest()j</div></pre></td></tr></table></figure>
<h3 id="PHP实现"><a href="#PHP实现" class="headerlink" title="PHP实现"></a>PHP实现</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">apiSign</span><span class="params">($parameters, $secret)</span></span></div><div class="line">&#123;</div><div class="line">	$str = <span class="string">''</span>;</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (gettype($parameters) === <span class="string">'array'</span>) &#123;</div><div class="line">		ksort($parameters);</div><div class="line">		<span class="keyword">foreach</span> ($parameters <span class="keyword">as</span> $k =&gt; $v) &#123;</div><div class="line">			$str .= $k.$v;</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="keyword">elseif</span> (gettype($parameters) === <span class="string">'string'</span>) &#123;</div><div class="line">		$str = $parameters;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	&#125;</div><div class="line">	$str = $secret.$str.$secret;</div><div class="line">	</div><div class="line">	<span class="keyword">return</span> md5($str);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Java实现"><a href="#Java实现" class="headerlink" title="Java实现"></a>Java实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">apiSign</span><span class="params">(List&lt;NameValuePair&gt; nvps)</span> <span class="keyword">throws</span> NoSuchAlgorithmException, IOException </span>&#123;</div><div class="line">    List&lt;String&gt; nvs = Lists.newArrayList();</div><div class="line">    <span class="keyword">for</span> (NameValuePair nvp: nvps) &#123;</div><div class="line">        <span class="keyword">boolean</span> noSignValue = nvp == <span class="keyword">null</span> || nvp.getValue() == <span class="keyword">null</span> ||</div><div class="line">                SIGN_EXCEPTIONS.contains(nvp.getName());</div><div class="line">        <span class="keyword">if</span> (noSignValue) <span class="keyword">continue</span>;</div><div class="line">        nvs.add(String.format(<span class="string">"%s=%s"</span>, nvp.getName(), nvp.getValue()));</div><div class="line">    &#125;</div><div class="line">    Collections.sort(nvs);</div><div class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder();</div><div class="line">    <span class="keyword">for</span> (String nv: nvs) sb.append(String.format(<span class="string">"%s"</span>, nv));</div><div class="line">    String encodeSource = String.format(<span class="string">"%s%s"</span>, sb.toString(), APP_SECRET);</div><div class="line">    <span class="keyword">return</span> MD5Util.MD5Encode(encodeSource, ENCRYPT_CHARSET).toLowerCase();</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/bashijiandangzuopengyou/" itemprop="url">
                  《把时间当作朋友》——别试图去管理时间
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-05T21:56:05+08:00" content="2016-06-05">
              2016-06-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/韦编三绝/" itemprop="url" rel="index">
                    <span itemprop="name">韦编三绝</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/bashijiandangzuopengyou/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="bashijiandangzuopengyou/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>说实话，李笑来的这本《把时间当作朋友》确实绕过去绕过来，把我饶得有点晕了，但是书中的主要观点我还是非常认同的。把时间当作朋友。从来都只听过如何去管理时间，却从来没听说过要去和时间做朋友。上帝给每个人的时间都是一样的，不是说你想怎么管理就怎么管理，从小学到大学到工作，每次考试前你不都有很多的复习计划，每次假期前不都有很多的出游计划吗，但是，有多少我们真正实现过呢。很多时候计划越详细，我们反而越不会执行。为什么？因为我们不了解时间，也不了解自己。就像你想和一个人做朋友一样，你们都不互相了解，非要在一起，那也是互相折磨而已。所以，要想与时间和睦相处，首先是要了解自己，自己是一个怎么样的人，自己喜欢做什么样的事情，什么样的事情会让自己有动力去做，到底为什么而活？</p>
<p>没有人不懒惰，没有人不爱做计划，只是那些成功的人普遍都是做了计划就立马行动的，这真的真的是我目前为止发现的最大的缺点。想太多，做得少。基本上从高中就开始意识到这个缺点了，也一直在改，在改的过程中又发现了另一个缺点，那就是只要我心里有一块石头，就不能放下它去做其他的事情了。我在外面实习都快一年了，这一年里感觉还没我大一一个暑假成长得快，我知道自己遇到了一个瓶颈，也做了很多的计划去冲破它，但就是碍于学校里数不清的杂事，一直没放心大胆地去做。最后导致两边都互相拖着，然后两边都没做好。其实专注于一件事没有什么不好，但是心中担心一件事情，就直接把那件事情做了就好呀，这有什么好犹豫的呢，有什么好纠结的呢。那件事情制约着我，我干嘛就不把他做了呢，一定要拖到最后。不过还好，毕业答辩做了充足的准备，还是顺利通过了。在昨天那个不存在的日子里进行的答辩，而且在答辩前几天我就已经开始我的全栈实践之路了。马上进入社会，希望能真的和时间做好朋友，然后和它并肩作战。</p>
<h2 id="语录"><a href="#语录" class="headerlink" title="语录"></a>语录</h2><p>当你把时间花在一个人身上的时候，相当于在他的身上倾注了你生命的一段，不管最终结果如何，反正，那个人、那件事都成了你生命的一部分——不管最后你是喜欢还是不喜欢。</p>
<p>一个人遗忘痛苦的能力特别强的一个具体表现就是，这个人会很轻易地原谅自己。</p>
<p>往往并不是有兴趣才能做好，而是做好了才有兴趣。</p>
<p>浪费生命、虚度年华的人，有个共同的特征——他们拼命想控制自己完全不能控制的，却在自己真正能掌控的地方彻底失控。</p>
<p>当我们不停地鼓励所有人的时候，最大的受益者其实是我们自己，因为最终我们会发现，自己开始进入一种他人无法想象的状态，成为一个不需要他人鼓励的人。</p>
<p>心智真正成熟的人在一些情况下能够做到无须亲自经历，仅凭思考就得到深刻的体会。</p>
<p>所谓的幸运，就是当你准备好了的时候，机会来了。</p>
<p>你比别人强一点根本没用，真正有用的是你比别人强很多很多。</p>
<p>学东西前不用定义一定要有用——别觉得知识现在没用就拒绝去学它。</p>
<p>人是没办法管理时间的，时间也不听从任何人的管理，它只会自顾自一如既往地流逝。”管理时间”只不过是人们的一厢情愿而已。</p>
<p>这些人其实并不是对自己正在做的事情没有兴趣，而是没有能力把目前正在做的事情做好。</p>
<p>本科教育之”本”在于培养学生的自学能力。从理论上讲，一个人本科毕业之后，应该有能力自学他所需要的任何知识。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/run-for-fun/" itemprop="url">
                  Run for Fun，记第一次迷你马拉松之旅
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-27T21:51:53+08:00" content="2016-05-27">
              2016-05-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/平凡之路/" itemprop="url" rel="index">
                    <span itemprop="name">平凡之路</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/run-for-fun/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="run-for-fun/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天，我顺利地完成了人生第一次的迷你马拉松。</p>
<p>其实在去年，我就最高跑过七公里，当时因为心情失落，所以闷着头跑，一直跑到手脚发麻才停下来。开始实习过后，我就几乎没有跑过步了。在上个公司是下班过后尽量提前几个站下车，然后走着回家。来了现在公司过后好一点，每天能够骑自行车上下班了。所以从体力上我还是觉得自己可以的。不过为了保险起见，在前天我去了石子山体育公园试跑了一下，感觉还不错，只不过跑完了过后腰酸背疼的。直到几天都还在痛。</p>
<p>今天六点钟，我们运维团的几个朋友就起床了，其实是听错了时间，以为8点开跑，结果是8点集合，10点开跑。到那儿过后天一直飘着雨，不过南滨路挨着嘉陵江，风景真的好，更好看的是…如图所示<br><img src="http://7xnc86.com1.z0.glb.clouddn.com/run-for-fun_0.JPG" alt="图片"><br>运维取经团的几个朋友：<br><img src="http://7xnc86.com1.z0.glb.clouddn.com/run-for-fun_1.JPG" alt="图片"><br>刚开始跑时，我突然感觉自己脚有点抽筋，于是放慢了一下脚步，之后才渐渐地匀速前进，但是主办方的路标是在是坑人，按常理来说应该是一公里一个提示，结果，它一个公里到两公里中间有一个提示，但是却没提示这时候的距离，只能让人以为这是1.5公里了，并且在折返点离2.5公里的路标是在太远，所以我们预计，总的里程大概在六公里多。折返跑有一个好处是，你能看到最前面的几个人，也能看到最后面的一群人。最后的一百米我还小小的冲刺了一下。其实我每次跑步最后都能够有冲刺的力气，但就是在前面无法提速，每次都是那样的速度，下次比赛我一定要克服这个问题，争取跑进半小时。今天的成绩大概在三十五六分钟。看看中途的我(白衣服短裤那个):<br><img src="http://7xnc86.com1.z0.glb.clouddn.com/run-for-fun_2.JPG" alt="图片"></p>
<p>总之，总体感觉真的很爽，虽然这次的比赛都是给公司的员工参加的，也就是说大家尽量在宣传自己的公司，不过，好多好多的人还是跑了个开心，run for fun，这才是比赛的宗旨。仔细想想自己为什么喜欢跑步呢，我想应该是因为跑步这个运动项目，每个人到达终点的距离一样，每个人的路线也都一样，只要坚持就一定可以到达终点，无论名词高低，到达终点后你都会如释重负，心胸特别舒畅。不像其他的运动项目，有很多的技巧、必须经过很多的练习或者场地总是有所限制。</p>
<p>随着马拉松的落幕，我的毕业论文也经过了查重，周末就上传毕业论文了，然后下周就答辩了，希望一切顺利，然后，就可以开始我的全栈工程师实践之旅。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/woyiranainiwozhishibuxihuannile/" itemprop="url">
                  《我依然爱你，我只是不喜欢你了》——谁都不知道爱情是什么样
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-14T18:19:29+08:00" content="2016-05-14">
              2016-05-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/韦编三绝/" itemprop="url" rel="index">
                    <span itemprop="name">韦编三绝</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/woyiranainiwozhishibuxihuannile/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="woyiranainiwozhishibuxihuannile/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>爱情是甜美的？爱情是苦涩的？花花世界，谁又能说得清呢。</p>
<p>《我依然爱你，我只是不喜欢你了》这本书是无意间在以前一位喜欢过的女生的一篇微博看到的，光看标题就有一种台湾的那种小清新爱情片的味道，看了一下简洁，是讲爱情的不是讲分手的爱情的，所以果断入手，毕竟和女朋友还处在热恋期，不知道为什么，我们俩热恋期咋这么长呢。</p>
<p>全书是由几十个小小的爱情故事汇聚而成，不知道真的是作者身边朋友的经历还是有很多朋友主动向作者倾诉的呢，我也好希望我身边能有一位情感专家，有什么心里问题她都能迎刃而解，什么心里话都能对她说，但是至今我的朋友圈也没出现过这样的人。作为书评，在这里我并不打算把我对爱情的理解写出来，因为也许可能大概我也写不出来，有些东西，在心里，就够了，是万万不能用我那笨拙的文字功底写出来的。另外，看了看豆瓣上的评分，其实还算不错，但是下面的有些评论我就不大赞成了。平淡、口水文，对于爱情来说，这样子有错吗？如果真的觉得平淡就觉得这是一本烂书，那我是该说你们不懂文学，还是该说你们不懂爱情呢？至少在我，一看到这个书名，就觉得这就是一本平平淡淡的书，就是一本贴近生活的书。这本书也绝不是一本只讲故事不走心的故事集，应该说它是很走心的，谁都可以深陷进那一个个的故事，也谁都可以从中体会到什么。</p>
<p>小井岩(作者)是个温柔的人，只有温柔的人，人们才会想他倾诉吧。很多时候，我也想做一个温柔的男朋友。虽然我比我女朋友小，我也很幼稚。和她刚在一起的时候就觉得她是那种很有气质型的，没想到，现在已经被我”调教“成一个每天都会向我撒娇的可爱女孩子了，虽然我也每天撒娇。她很好，我是她第五个男朋友，她是我第三个女朋友，我们谁都不知道会不会一直走下去，但又一直都朝着一直走下去的目标努力着。不仅我们过去爱的是人渣还是真的错过，过去的都已经翻篇了，就像我最开始说的以前喜欢过的那个女生，我现在女朋友也知道我以前喜欢过她，但是女朋友并不会阻止我和她聊天，说了半天，我到底想说什么呢，我也不知道。反正，米娜，有爱到来的时候就好好爱吧，不要刻意去回避，也不要刻意去追逐，一切随缘，不矫揉造作的爱，才是最真最纯的爱。(不要问我为什么不多谈谈书中的内容，因为看了大半年了吧，已经忘记了，只能从kindle里的笔记中找一点点当时的体会)</p>
<h4 id="语录"><a href="#语录" class="headerlink" title="语录"></a>语录</h4><p>我知道我已离开你的世界，也知道，彼此不再有交集，然而心中某块地方，始终无法抹去存在的痕迹。我依然爱你，我只是知道，自己不能再像以前那样喜欢你了。 依然祝你，平安幸福。</p>
<p>“你知道年轻的时候穷最大的问题是什么吗？”<br>“什么？”<br>“以为所有得不到的一切都是穷的错。眼睛盯着遥远的地方看不到身边一朵花的美丽。”</p>
<p>对那时的我来说，爱情是什么并不重要，就像我知道苹果就是苹果，而不需要知道它是蔷薇科还是落叶乔木；就像当我遇见你，我就知道遇见了爱情。</p>
<p>最温暖的相处模式，就是两个人在一起的时候，有一种自然而然的舒适氛围，能够消解心中的那些戾气，恢复成最放松而且淡然的自己。没有强烈的惴惴不安，也没有莫名的看不顺眼，没有所有那些消耗神经的累的东西。只要我知道你在，一切就都很好。</p>
<p>真的有些人，让你相信人是有上辈子的，不然为何一相见就可以自然而然跳过试探、了解、熟悉的人际程序直接成为那个直达灵魂的亲密之人。</p>
<p>做个称职的前任吧，不纠缠，不打扰，不撩拨。心里那些残存的想念，是怀念和感激。放下心中那多愁善感的郁金香，才会开出畅然伸展的蓝莲花。</p>
<p>我觉得真正爱一个人的表现肯定是努力使自己和对方变得更好，怎么会是拉着对方一起下沉呢？</p>
<p>我不认为一辈子只爱一个人是件可惜的事，也不认为一辈子爱过很多人就是一件不道德的事。</p>
<p>秒速五厘米间，樱花蹁跹了看客；人生聚散离合，伊人明媚了岁月。</p>
<p>如果我们费尽所有心力，都不能在那个心爱的心上留下一个深一点的痕迹，这不是对方的错，也不是你的错。因为不是你不努力，而是对方跑得太快，飞得太高。</p>
<p>感动不是爱情，爱情根本不需要这么累，你追我跑，那是狩猎，我又不是猎物！</p>
<h4 id="最后献上知乎的几位朋友对”我爱你，我只是不再喜欢你了”的解释"><a href="#最后献上知乎的几位朋友对”我爱你，我只是不再喜欢你了”的解释" class="headerlink" title="最后献上知乎的几位朋友对”我爱你，我只是不再喜欢你了”的解释"></a>最后献上知乎的几位朋友对”我爱你，我只是不再喜欢你了”的<a href="https://www.zhihu.com/question/31681497" target="_blank" rel="external">解释</a></h4><p>《One Day》里安妮海瑟薇的一句台词 我无法控制自己对你的难以忘怀 可是我关于你的一切已经再也没有了期待。    ——<a href="https://www.zhihu.com/people/peng-si-ya" target="_blank" rel="external">Pengsiya</a><br>我会想起我们的过去，却不会再去想我们的未来。    ——<a href="https://www.zhihu.com/people/bing-huang-ma-luan-66" target="_blank" rel="external">兵荒马乱</a><br>“不介意孤独，比爱你舒服”    ——<a href="https://www.zhihu.com/people/bai-zhou-12-64-95" target="_blank" rel="external">江白粥</a><br>我还是曾经的那个我，你已经不是曾经的那个你了。 —— <a href="https://www.zhihu.com/people/gui-mu-zhi" target="_blank" rel="external">鬼木知</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/anshijian/" itemprop="url">
                  《暗时间》
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-08T20:06:20+08:00" content="2016-05-08">
              2016-05-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/韦编三绝/" itemprop="url" rel="index">
                    <span itemprop="name">韦编三绝</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/anshijian/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="anshijian/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近真的太忙，但是再忙我也强迫自己抽出一些碎片时间来阅读，所以写书评也是必要的，因为，一本书不写书评，我根本就看不下去另一本书。对了，其实前几天还看过一本书叫《程序员的数学思维修炼》，这本书几乎是直接翻过去的，因为里面的内容基本上是给没上过大学的人看的，所以也就没有写书评的必要了。</p>
<p>《暗时间》是本与效率有很大关系的书，有很多套路，但是也不乏新奇之处，很多章节虽然啰嗦而且段落太长(不知道是不是我kindle显示的原因)，但是书中对于每一个结论的得出，都是经过了层层推敲，循序渐进地引导我们进入作者的思维中去。而不是如其他效率书一样，上来就是一个结论，然后教我们步骤。整体感觉上，这本书还是挺不错的，可以给四分。对于“暗时间”的概念，我是觉得作者在这里并不是标题党，确实作者的“暗时间”并不仅仅是指传统意义上的碎片时间。</p>
<p>更深层次地讲，此书，并不是完全讲时间管理，而更多的是一种引导，引导我们认知、学习，文中提到很多关于学习的方法以及很多学习不好的方法对我来说都受益匪浅。对于时间管理，我现在使用的是番茄工作法，基本上解决了碎片时间的利用率问题和工作休息切换的问题；但另一方面，天秤座最主要的特点，犹豫不决，我在这一点上依然会浪费很多的时间，而且总是给自己和身边的人造成困扰。我想或许经历得更多，我就能有更多的果断和从容，但是又该怎样在有限的时间里比普通人经历更多呢？</p>
<p>书中关于学习算法那个章节我的印象是十分深刻的，因为我也曾经参加过ACM比赛，也曾经疯狂地刷题，虽然最终放弃了，但是那段一心钻研算法的日子真心值得回忆。看了该书，我仿佛茅塞顿开，仔细想想，曾经的很多算法书，特别是我们的教材上面讲算法，包括数学的公式证明，在引导我们的中途几乎都会突然来一个转折，“不妨在这里…”这样的坑我以前也踩过很多次，特别是在啃那部《算法导论》的时候，当时我就一直想弄明白，这里凭什么就突然要这么做了。事实上，正如作者所说好多的书籍都弱化了思考的这一环节，事实上，我猜，那些书的作者可能也没理解到这样转折的理由，如果真要把思考的过程全部加起来，那么随便一个K(kan)M(mao)P(pian)算法也足矣成一本书了。在刷OJ的那几个月里，我记住了很多算法，也记不住很多算法，但现在仔细想来，基本上能记住的算法，我都能清清楚楚地知道那个算法是怎么演变而来的以及为什么要用那个算法和什么时候用那个算法。</p>
<p>书中还提到几个日常中非常实用的思维训练以及时间管理方法：  </p>
<ul>
<li>设置自己的进度条，将目标分割成一个个里程碑，再讲里程碑分割为一个个TODO list列表</li>
<li>如果有什么难题困扰你了，那就在睡觉前一直想，你永远不知道大脑在你睡着的时候会怎么奇迹般地解决这个问题。这点相信很多人都是有实际体会的吧。 </li>
<li>走路睡觉吃饭都可以思考，当你完完全全陷入一个问题的时候你就会知道你突然多了好多的时间</li>
<li>时常反省和注意自己的思维过程。尤其是当遇到无法理解或解决的问题之后，最需要把原先的思维过程回顾一遍，看看到底是哪个过程被阻塞住了妨碍了理解。</li>
</ul>
<p>后记：写完了整个书评，突然觉得这本书比我之前认为的还要有意义得多，我现在可以给它五星了。</p>
<h2 id="语录"><a href="#语录" class="headerlink" title="语录"></a>语录</h2><p>你会在这本书当中看到的一个重复出现的现象就是自学，大规模的自学，逃课自学，上网找书自学，程序员行业是最适合自学的行业，网络是程序员的天堂，需要的资源、工具，比课堂上的多出何止百倍，如果说还有一个学科，并不需要传统的教育就可以成才，估计非程序员莫属了。作为程序员如果没有查过wikipedia，没有看过几本原版电子书，没有在国内外主要邮件列表里面提过问题吵过架，没有用技术博客记录学习的独特体会，没有订阅技术牛人们的博客，怎么好意思说身在这个行业呢？</p>
<p>利用走路和吃饭的时候思考，还有睡觉前必然要弄一个问题放在脑子里面，在思考中迷糊入睡。发现这样一来往往在不知不觉中多出来大量的思考时间。将思考成为习惯还有一个很大的好处–避免焦虑。</p>
<p>尽量避免琐事骚扰，不重要的事情能不做就不做。有时候，紧急的事情往往只是当事人觉得必须马上做完才显得紧急或者干脆就是紧他人之急，最糟糕的就是纯属性格上原因觉得每件事情都得第一时间完成，很多看上去紧急的事情实际上并不是真的”不能再拖了”，有的干脆就并不需要或值得去做。有很多事情都是可以先放一放甚至完全let go的，否则的话就整天被所谓”紧急”的事情牵着鼻子走了。</p>
<p>有一句话说：看一个人，只要看他读的书和见的人。还是很有道理的，这两者是一个人成长中最有价值的信息来源。</p>
<p>一个你不明白其证明的定理在我看来比不知道这个定理还要糟糕，因它给你造成一种懂了的错觉。与看定理必看证明类似，看一个问题的解法，必然要看解法所诞生的过程，背后是否隐藏着更具一般性的解决问题的思路和原则。否则一个解法就只是一个问题的解法，跟背口诀一样。即，知道了算法是怎样一步步被推导出来的，我们就一下拥有了大量的记忆提取线索：对算法发现过程中的任何一个关键步骤（尤其是本质）的回忆都可能使我们能够自己动手推导出剩余的内容</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/tornado-asynchronous/" itemprop="url">
                  从Tornado谈异步与非阻塞
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-11T23:59:57+08:00" content="2016-04-11">
              2016-04-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/编程之路/" itemprop="url" rel="index">
                    <span itemprop="name">编程之路</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/tornado-asynchronous/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="tornado-asynchronous/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在做毕业设计的时候，由于后端有一个耗时任务，所以想到了异步，又由于长期使用Python，进而想到了Tornado，然后，我就半个月没做毕设了，说来全是坑啊。在了解异步与阻塞的原理之前我就盲目地想从代码层面去实现，这样只会浪费时间。所以这里我就先描述一下我对这几个概念的理解。</p>
<h3 id="异步与同步：是消息通信机制的层面"><a href="#异步与同步：是消息通信机制的层面" class="headerlink" title="异步与同步：是消息通信机制的层面"></a>异步与同步：是消息通信机制的层面</h3><p>采用异步的时候，程序并不关心该操作的结果，所以并不会有返回结果，比如ajax，一般会给异步操作赋予一个回调函数，通过这个回调函数对结果进行处理，而不是直接将结果返回给外部(在ajax如果return结果则会是一个null值)</p>
<h3 id="阻塞与非阻塞：指程序在等待调用结果时的状态"><a href="#阻塞与非阻塞：指程序在等待调用结果时的状态" class="headerlink" title="阻塞与非阻塞：指程序在等待调用结果时的状态"></a>阻塞与非阻塞：指程序在等待调用结果时的状态</h3><p>如果是阻塞，则程序会一直等待程序返回结果，如果是非阻塞，则不会等待，而继续执行下面或者其他的代码了。</p>
<h3 id="阻塞式IO"><a href="#阻塞式IO" class="headerlink" title="阻塞式IO"></a>阻塞式IO</h3><p>耗时型任务一般分为两类：CPU耗时型任务和IO耗时型任务。CPU指一般的代码运算执行过程，IO一般分为两大类，计算型IO和阻塞式IO。如果仅有一个线程，那么同一时刻只能有一个任务在计算，但如果是阻塞式IO，它可以让它先阻塞掉，然后去计算其他的任务，等到内核告诉程序那边没有被阻塞了就、再回到之前的地方进行之后的运算。</p>
<p>所以，在了解了这些概念过后，我就知道了为什么要发挥tornado的异步特性就得依赖异步库(<a href="https://github.com/tornadoweb/tornado/wiki/Links" target="_blank" rel="external">Tornado官方提供的第三方异步库</a>)，而不是随便一行代码都能变成异步非阻塞式的代码。比如我试验时使用的一个sleep函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">def sleep(self):</div><div class="line">    for i in range(100000000):</div><div class="line">        if i % 100000 == 0:</div><div class="line">            print(i)</div><div class="line">    self.set_cookie(&apos;setting&apos;, &apos;hao&apos;)</div></pre></td></tr></table></figure>
<p>看吧，这是一个计算型任务，由于tornado是单进程单线程，所以无论怎么做也不可能实现在访问该请求的时候访问其他请求，因为CPU只能执行当前任务，其他请求必须等到这个请求结束后才能成功，这也是为什么部署tornado的时候几乎都是用nginx+多实例事实上，同理，其他的框架基本上都是需要nginx、apache等配合才能同时服务于多个请求的。Tornado的异步库，几乎都是用来进行阻塞式IO任务的，所以只有他们才能发挥其异步特性。</p>
<p>Tornado的异步实现就是将当前请求的协程暂停，等待其返回结果，在等待的过程中当前请求不能继续往下执行，但是如果有其他请求(同样是一个协程)，只要不也是阻塞式IO，那么就会直接去处理其他的请求了。</p>
<p>当然，包括nodejs的异步等，这些统统都是有历史原因的，JavaScript和Python在发展之初都只支持单进程单线程，即使使用多线程技术最多也只能利用到100%的单核，多核在这里似乎并不使用，而如果要使用多进程变成，光靠框架是做不到的，必须自己根据实际需求来处理多进程之前的数据共享、资源竞争等问题。所以，在我的理解里，如果能直接利用多线程编程就不需要用服务端异步，毕竟，多线程的发明本身也是为了解决阻塞式IO的问题。</p>
<h2 id="多线程实现异步、非阻塞、并行请求、并行计算"><a href="#多线程实现异步、非阻塞、并行请求、并行计算" class="headerlink" title="多线程实现异步、非阻塞、并行请求、并行计算"></a>多线程实现异步、非阻塞、并行请求、并行计算</h2><p>其实我认为多线程相比于异步非阻塞有很大的优点，不可否认，多线程在线程切换上存在开销，并且在资源竞争上需要写更多的逻辑，稍微控制不好就会导致服务出错，然而，多线程在处理并行任务上有先天的优势，这一点光看名字就看得出来，下面介绍Tornado的多线程和Flask多线程的用法，其中Tornado的多线程是指由程序将当前请求中的代码交由其他线程处理，而flask的多线程就是类似apache服务器，另起一个进程来处理请求。</p>
<p>注意：两者都可以使用global来引用全局变量</p>
<h4 id="Tornado实现：当前请求会立马返回一个结果并断开当前http连接，所以不能在这里设置cookie"><a href="#Tornado实现：当前请求会立马返回一个结果并断开当前http连接，所以不能在这里设置cookie" class="headerlink" title="Tornado实现：当前请求会立马返回一个结果并断开当前http连接，所以不能在这里设置cookie"></a>Tornado实现：当前请求会立马返回一个结果并断开当前http连接，所以不能在这里设置cookie</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">import tornado.ioloop</div><div class="line">import tornado.web</div><div class="line">import time</div><div class="line">from concurrent.futures import ThreadPoolExecutor</div><div class="line">import tornado.httpclient</div><div class="line">from tornado.concurrent import run_on_executor</div><div class="line"></div><div class="line">class Executor(ThreadPoolExecutor):</div><div class="line">	_instance = None</div><div class="line"></div><div class="line">   	def __new__(cls, *args, **kwargs):</div><div class="line">       	if not getattr(cls, &apos;_instance&apos;, None):</div><div class="line">           	cls._instance = ThreadPoolExecutor(max_workers=10)</div><div class="line">       	return cls._instance</div><div class="line"></div><div class="line">class SleepHandler(tornado.web.RequestHandler):</div><div class="line">   	executor = ThreadPoolExecutor(10)</div><div class="line"></div><div class="line">   	def get(self):</div><div class="line">     	tornado.ioloop.IOLoop.instance().add_callback(self.sleep) # 相当于丢到下一个时间循环去  </div><div class="line">       	self.write(&quot;when i sleep&quot;)		# 请求会立马返回这个值并断开连接</div><div class="line"></div><div class="line">   	@run_on_executor</div><div class="line">   	def sleep(self):</div><div class="line">       	for i in range(100000000):</div><div class="line">           	if i % 100000 == 0:</div><div class="line">               	print(i)</div><div class="line">       	self.set_cookie(&apos;username&apos;, &apos;hao&apos;)</div><div class="line"></div><div class="line">       	print(&quot;yes&quot;)</div><div class="line">       	return 5</div><div class="line"></div><div class="line">class TestHandler(tornado.web.RequestHandler):</div><div class="line">   	def get(self):</div><div class="line">       	if not self.get_cookie(&apos;username&apos;):</div><div class="line">           	self.write(&apos;没有&apos;)</div><div class="line">       	else:</div><div class="line">           	self.write(&apos;有&apos;)</div><div class="line">           	</div><div class="line">application = tornado.web.Application([</div><div class="line">	(r&quot;/test&quot;, TestHandler),</div><div class="line">	(r&quot;/sleep&quot;, SleepHandler),</div><div class="line">	], debug=True)</div><div class="line"></div><div class="line">if __name__ == &quot;__main__&quot;:</div><div class="line">   	application.listen(8888)</div><div class="line">   	tornado.ioloop.IOLoop.instance().start()</div></pre></td></tr></table></figure>
<h4 id="flask实现：直接在启动时添加参数，当前请求不会立马返回一个返回值，会一直处于连接状态，所以可以设置cookie"><a href="#flask实现：直接在启动时添加参数，当前请求不会立马返回一个返回值，会一直处于连接状态，所以可以设置cookie" class="headerlink" title="flask实现：直接在启动时添加参数，当前请求不会立马返回一个返回值，会一直处于连接状态，所以可以设置cookie"></a>flask实现：直接在启动时添加参数，当前请求不会立马返回一个返回值，会一直处于连接状态，所以可以设置cookie</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">from flask import Flask,request,make_response</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line">@app.route(&apos;/&apos;)</div><div class="line">def hello_world():</div><div class="line">	username = request.cookies.get(&apos;username&apos;)</div><div class="line">   	if username is None:</div><div class="line">      	return &apos;没有&apos;</div><div class="line">   	else:</div><div class="line">       	return &apos;有&apos;</div><div class="line">   	return username</div><div class="line"></div><div class="line">@app.route(&apos;/s&apos;)</div><div class="line">def sleep():</div><div class="line">   	for i in range(100000000):</div><div class="line">       	if i % 100000 == 0:</div><div class="line">			print(i)</div><div class="line">	resp = make_response(&apos;ok&apos;)</div><div class="line">   	resp.set_cookie(&apos;username&apos;, &apos;the username&apos;)</div><div class="line">   	return resp</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">	app.run(debug=True, threaded=True)</div></pre></td></tr></table></figure>
<p><strong>参考文章</strong><br><a href="https://www.zhihu.com/question/19732473" target="_blank" rel="external">知乎：怎样理解阻塞非阻塞与同步异步的区别?</a><br><a href="http://tornadocn.readthedocs.org/zh/latest/guide/async.html" target="_blank" rel="external">Tornado文档：异步非阻塞I/O</a><br><a href="http://docs.pythontab.com/tornado/introduction-to-tornado/ch5.html" target="_blank" rel="external">Tornado教程：异步Web服务</a><br><a href="http://cloudaice.com/tornado-coroutine/" target="_blank" rel="external">使用tornado的coroutine进行编程</a><br><a href="https://segmentfault.com/q/1010000004910793?_ea=722806" target="_blank" rel="external">我在segmentfault的提问：无法理解tornado的异步</a>  </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="haofly" />
          <p class="site-author-name" itemprop="name">haofly</p>
          <p class="site-description motion-element" itemprop="description">豪翔天下的个人博客</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">143</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/haoflynet" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/haoflynet" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              小伙伴们
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://xiang.jwzcq.com" title="谢翔的博客" target="_blank">谢翔的博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.phodal.com" title="Phodal" target="_blank">Phodal</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.cnblogs.com/qingguo" title="qingguo" target="_blank">qingguo</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://zkzhao.github.io/" title="zkzhao" target="_blank">zkzhao</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.qingguoing.com/" title="倾国倾城的博客" target="_blank">倾国倾城的博客</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">haofly</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"haoflynet"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>
